System.register("chunks:///_virtual/ActiveReload.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,r,o,s,n,l,a,u,c,h,f,p,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){n=t.cclegacy,l=t._decorator,a=t.ProgressBar,u=t.UITransform,c=t.Color,h=t.Sprite,f=t.Animation,p=t.easing,d=t.Component}],execute:function(){var g,_,R,A,m,y,v,C,b,S,P,w,B,D,E,T,z,F,I;n._RF.push({},"cf52fO5rsJCR6PqgLDh1u9z","ActiveReload",void 0);var L=l.ccclass,N=l.property,U=t("EVNT_ACTIVE_RELOAD_SUCCESS","EARS"),H=t("EVNT_ACTIVE_RELOAD_FAILED","EARF"),O=t("AR_PERFECT",1),k=t("AR_NORMAL",0),x=t("AR_FAILED",-1);t("ActiveReload",(g=L("ActiveReload"),_=N(a),R=N(u),A=N(u),m=N(u),y=N(c),v=N(c),C=N(h),b=N(f),g((w=e((P=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return e=t.call.apply(t,[this].concat(s))||this,r(e,"ActiveReloadProgressBar",w,o(e)),r(e,"ARPerfectRegion",B,o(e)),r(e,"ARNormalRegion",D,o(e)),r(e,"ReloadProgress",E,o(e)),r(e,"FailureColor",T,o(e)),r(e,"DefaultColor",z,o(e)),r(e,"AllSprites",F,o(e)),r(e,"animHandle",I,o(e)),e._progressBarUT=void 0,e._numSuccess=0,e._progress=0,e._duration=1,e._difficulty=1,e._active=!1,e}i(e,t);var n=e.prototype;return n.start=function(){this._progressBarUT=this.ActiveReloadProgressBar.getComponent(u)},n.setSpritesColor=function(t){this.AllSprites.forEach((function(e){var i=e.color.a;e.color=new c(t.r,t.g,t.b,i)}))},n.resetWidget=function(){this.difficulty=1,this._numSuccess=0,this.ActiveReloadProgressBar.progress=0,this.setSpritesColor(this.DefaultColor),this.node.getComponent(h).color.set(this.DefaultColor)},n.update=function(t){this._active&&(this._progress+=t/this._duration,this._progress>1&&(this._progress=1,this.active=!1),this.ActiveReloadProgressBar.progress=p.quadOut(this._progress))},n.onActiveReloadTriggered=function(){this.active=!1;var t=this.ARNormalRegion.getBoundingBoxToWorld(),e=this.ReloadProgress.getBoundingBoxToWorld();return t.intersects(e)?(this.showSuccessUI(),this.animHandle.play(),this._numSuccess++,this._numSuccess>2&&this._numSuccess%2==0&&(this._difficulty+=1),this.ARPerfectRegion.getBoundingBoxToWorld().intersects(e)?(this.node.emit(U,O),O):(this.node.emit(U,k),k)):(this.node.emit(H,x),this.showFailureUI(),this.animHandle.play(),x)},n.showSuccessUI=function(){this.active=!1,this.setSpritesColor(this.DefaultColor),this.animHandle.play()},n.showFailureUI=function(){this.active=!1,this.setSpritesColor(this.FailureColor),this.animHandle.play()},s(e,[{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t}},{key:"difficulty",get:function(){return this._difficulty},set:function(t){this._difficulty=t,this._difficulty<1&&(this._difficulty=1),this._difficulty>5&&(this._difficulty=5);var e=[1,1,1.5,2,3][this._difficulty-1];this.ARNormalRegion.width=this.ARNormalRegion.width/e}},{key:"active",set:function(t){this._active=t,this._active&&(this.ActiveReloadProgressBar.progress=0,this._progress=0,this.setSpritesColor(this.DefaultColor),this.node.getComponent(h).color.set(this.DefaultColor))}}]),e}(d)).prototype,"ActiveReloadProgressBar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(P.prototype,"ARPerfectRegion",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(P.prototype,"ARNormalRegion",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(P.prototype,"ReloadProgress",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(P.prototype,"FailureColor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(P.prototype,"DefaultColor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(P.prototype,"AllSprites",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=e(P.prototype,"animHandle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=P))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationNames.ts",["cc"],(function(_){"use strict";var e;return{setters:[function(_){e=_.cclegacy}],execute:function(){e._RF.push({},"6d22faH3c1OWowmcGGuP9qz","AnimationNames",void 0);_("MAINMENU_UI_ANIMATE_IN","mainmenu_ui_animate_in"),_("HUD_ANIMATE_IN","gameplay_ui_animate_in"),_("HUD_ANIMATE_OUT","gameplay_ui_animate_out"),_("TIMEOUT_MESSAGE_SHOW","gameplay_timeout"),_("MESSAGEBOX_ANIMATE_IN","show_message_box");e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,r,o,n,a,s,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.AudioClip,l=t.AudioSource,u=t.Component}],execute:function(){var p,c,f,h,y,d,_;n._RF.push({},"9b6bfryCs9LpZ0xPhoboqOi","AudioHandler",void 0);var m=a.ccclass,b=a.property;t("AudioHandler",(p=m("AudioHandler"),c=b(s),f=b(s),p((d=i((y=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return i=t.call.apply(t,[this].concat(n))||this,r(i,"sfx_list",d,o(i)),r(i,"music_list",_,o(i)),i.sfx_player=void 0,i.music_player=void 0,i.audio_map=new Map,i}e(i,t);var n=i.prototype;return n.start=function(){var t=this,i=this.node.getComponents(l);this.sfx_player=i[0],this.music_player=i[1],this.sfx_list.forEach((function(i){t.audio_map.set(i.name,i)}))},n.playSFX=function(t,i){"string"==typeof t&&this.audio_map.has(t)?null!=i?this.sfx_player.playOneShot(this.audio_map.get(t),i):this.sfx_player.playOneShot(this.audio_map.get(t)):"object"==typeof t&&(null!=i?this.sfx_player.playOneShot(t,i):this.sfx_player.playOneShot(t))},n.update=function(t){},i}(u)).prototype,"sfx_list",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=i(y.prototype,"music_list",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=y))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/BezierTest.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,i,n,r,a,s,l,u,c,d,p,f,y,h,m,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,l=e.Prefab,u=e.NodeEventType,c=e.instantiate,d=e.v3,p=e.Vec3,f=e.randomRangeInt,y=e.tween,h=e.easing,m=e.bezier,v=e.Component}],execute:function(){var b,w,P,g,z,D,N,T,x;r._RF.push({},"13880l0DpZIoqQddPVK1dCR","BezierTest",void 0);var I=a.ccclass,S=a.property;e("BezierTest",(b=I("BezierTest"),w=S(s),P=S(s),g=S(l),b((N=t((D=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"SourceNode",N,n(t)),i(t,"DestinationNode",T,n(t)),i(t,"ItemToAnimate",x,n(t)),t}o(t,e);var r=t.prototype;return r.start=function(){this.node.on(u.MOUSE_DOWN,this.onMouseDown,this)},r.onMouseDown=function(){var e=c(this.ItemToAnimate);this.node.addChild(e),e.worldPosition=this.SourceNode.worldPosition;var t=this.SourceNode.worldPosition,o=this.DestinationNode.worldPosition,i=d();p.add(i,t,o),i.multiplyScalar(.5),i.x+=200*f(-1,1),y(e).to(1,{worldPosition:o},{easing:h.expoIn,onUpdate:function(e,n){var r=m(t.x,i.x,i.x,o.x,n),a=m(t.y,i.y,i.y,o.y,n);e.setWorldPosition(r,a,0)}}).call((function(){e.removeFromParent()})).start()},r.update=function(e){},t}(v)).prototype,"SourceNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(D.prototype,"DestinationNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(D.prototype,"ItemToAnimate",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=D))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/BoxCullingScript.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,n,t,o,r,a,l,s,u,c,p,m,d,f,y;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,s=e.Camera,u=e.BoxCollider,c=e.geometry,p=e.log,m=e.MeshRenderer,d=e.Vec3,f=e.Color,y=e.Component}],execute:function(){var h,x,g,b,z,C,v,B,R,w;r._RF.push({},"a34b9RRWzdHgoTiutKLcV9A","BoxCullingScript",void 0);var A=a.ccclass,L=a.property,P=a.executeInEditMode;e("BoxCullingScript",(h=A("BoxCullingScript"),x=P(!0),g=L(l),b=L(l),z=L(s),h(C=x((B=i((v=function(e){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,t(i,"modelList",B,o(i)),t(i,"cubeRepresentation",R,o(i)),t(i,"mainCamera",w,o(i)),i.boxes=[],i}n(i,e);var r=i.prototype;return r.start=function(){var e,i,n=this,t=this.getComponent(u),o=this.node.position,r=new c.AABB(o.x,o.y,o.z,t.size.x/2,t.size.y/2,t.size.z/2);p(r),null==(e=this.mainCamera)||null==(i=e.camera)||i.initGeometryRenderer(),this.modelList.children.map((function(e,i){var t=e.getComponent(m).mesh,o=(e.addComponent(u),t.minPosition),r=t.maxPosition,a=new d;d.subtract(a,r,o),a.multiply3f(e.scale.x,e.scale.y,e.scale.z);var l=new c.AABB(e.position.x-a.x,e.position.y-a.y,e.position.z-a.z,a.x,a.y,a.z);return n.boxes.push(l),t})).forEach((function(e){p(e.minPosition,e.maxPosition)}))},r.update=function(e){var i=this;this.boxes.forEach((function(e){var n,t;null==(n=i.mainCamera)||null==(t=n.camera)||t.geometryRenderer.addBoundingBox(e,f.GREEN,!0,!1,!0)}))},i}(y)).prototype,"modelList",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(v.prototype,"cubeRepresentation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(v.prototype,"mainCamera",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v))||C)||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonNames.ts",["cc"],(function(_){"use strict";var A;return{setters:[function(_){A=_.cclegacy}],execute:function(){A._RF.push({},"2594e7Ai2ZHkItpgG7lzq5x","ButtonNames",void 0);_("CLOSE_BUTTON_DATA","close"),_("MESSAGEBOX_BTN1_DATA","mbox_btn1"),_("MESSAGEBOX_BTN2_DATA","mbox_btn2"),_("BUY_BUTTON_DATA","buy_changes"),_("BUY_UPGRADE_CLIP_SIZE_DATA","buy_upgrade_ClipSize"),_("BUY_UPGRADE_SPEED_DATA","buy_upgrade_Speed"),_("CUSTOMIZE_BUTTON_DATA","customize"),_("CLAIM_REWARD_BUTTON_DATA","claim_reward"),_("PAUSE_BUTTON_DATA","pause");A._RF.pop()}}}));

System.register("chunks:///_virtual/ColorPicker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,o,e,r,n,s,a,h,c,l,u,p,f,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,a=t._decorator,h=t.Slider,c=t.Node,l=t.Sprite,u=t.color,p=t.Vec3,f=t.NodeEventType,d=t.Component}],execute:function(){var _,v,g,T,S,m,C,y,P,b,w,U,M;s._RF.push({},"37ac682/I9MOZayU4pFvk8E","ColorPicker",void 0);var G=a.ccclass,H=a.property;t("ColorPicker",(_=G("ColorPicker"),v=H(h),g=H(c),T=H(c),S=H(c),m=H(l),_((P=i((y=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,e(i,"hueSlider",P,r(i)),e(i,"svGradiant",b,r(i)),e(i,"sline",w,r(i)),e(i,"vline",U,r(i)),e(i,"previewSprite",M,r(i)),i._color=u(),i._touchPos=new p,i._offset=new p,i._gradiantMaterial=null,i}o(i,t);var s=i.prototype;return s.start=function(){this.color=u(255,0,0,255)},s._getColorFromUI=function(){var t=this.svGradiant._uiProps.uiTransformComp,i=(this._offset.x+t.width/2)/t.width,o=(this._offset.y+t.height/2)/t.height;this._color.fromHSV(this.hueSlider.progress,i,o)},s._setMainColor=function(){var t=this.hueSlider.progress;this._gradiantMaterial.setProperty("mainColor",u().fromHSV(t,1,1))},s.onEnable=function(){this.svGradiant.on(f.TOUCH_START,this._onTouchBegan,this),this.svGradiant.on(f.TOUCH_MOVE,this._onTouchMoved,this),this.svGradiant.on(f.TOUCH_END,this._onTouchEnded,this),this._gradiantMaterial=this.svGradiant.getComponent(l).customMaterial,this._setMainColor()},s.onDisable=function(){this.svGradiant.off(f.TOUCH_START,this._onTouchBegan,this),this.svGradiant.off(f.TOUCH_MOVE,this._onTouchMoved,this),this.svGradiant.off(f.TOUCH_END,this._onTouchEnded,this)},s._onTouchBegan=function(t){var i=t.touch.getUILocation();p.set(this._touchPos,i.x,i.y,0),this.svGradiant._uiProps.uiTransformComp.convertToNodeSpaceAR(this._touchPos,this._offset),this.updateSVUI(),t&&(t.propagationStopped=!0)},s._onTouchMoved=function(t){var i=t.touch.getUILocation();p.set(this._touchPos,i.x,i.y,0);var o=this.svGradiant._uiProps.uiTransformComp;o.hitTest(t.touch.getLocation())&&(o.convertToNodeSpaceAR(this._touchPos,this._offset),this.updateSVUI(),t&&(t.propagationStopped=!0))},s.updateSVUI=function(){this.sline.setPosition(this._offset.x,0),this.vline.setPosition(0,this._offset.y),this._getColorFromUI(),this.previewSprite.color=this._color,this.node.emit("color-changed",u(this._color))},s._onTouchEnded=function(t){t&&(t.propagationStopped=!0)},s.update=function(t){},s.onHueSliderChange=function(t){this._setMainColor(),this._getColorFromUI(),this.previewSprite.color=this._color,this.node.emit("color-changed",u(this._color))},n(i,[{key:"color",get:function(){return this._color},set:function(t){var i=t.toHSV();this.hueSlider.progress=i.h;var o=this.svGradiant._uiProps.uiTransformComp;this._offset.x=i.s*o.width-o.width/2,this._offset.y=i.v*o.height-o.height/2,this.sline.setPosition(this._offset.x,0),this.vline.setPosition(0,this._offset.y),this._color=t,this.previewSprite.color=t}}]),i}(d)).prototype,"hueSlider",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(y.prototype,"svGradiant",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(y.prototype,"sline",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(y.prototype,"vline",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(y.prototype,"previewSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=y))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/ColorPickerWidget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VSPicker.ts"],(function(e){"use strict";var r,t,i,o,s,n,c,l,a,u,h,p,v;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,c=e._decorator,l=e.color,a=e.Slider,u=e.Sprite,h=e.Vec2,p=e.Component},function(e){v=e.VSPicker}],execute:function(){var f,d,_,g,m,y,P;n._RF.push({},"eb419DLXO5ExppdM9EBCem0","ColorPickerWidget",void 0);var S=c.ccclass,k=c.property,C=l();e("ColorPickerWidget",(f=S("ColorPickerWidget"),d=k(a),_=k(v),f((y=r((m=function(e){function r(){for(var r,t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return r=e.call.apply(e,[this].concat(s))||this,i(r,"hueSlider",y,o(r)),i(r,"vsPicker",P,o(r)),r._color=l(),r._hsv_material=null,r}t(r,e);var n=r.prototype;return n.onLoad=function(){this._hsv_material=this.node.getComponent(u).customMaterial},n.onHSliderMoved=function(e,r){C.fromHSV(this.hueSlider.progress,1,1),this._hsv_material.setProperty("mainColor",C)},s(r,[{key:"color",get:function(){var e=this.hsv;return this._color.fromHSV(e.h,e.s,e.v)},set:function(e){this._color=e,this.hsv=this._color.toHSV()}},{key:"hsv",get:function(){return{h:this.hueSlider.progress,s:this.vsPicker._sv.x,v:this.vsPicker._sv.y}},set:function(e){this.hueSlider.progress=e.h,this.vsPicker.sv=new h(e.s,e.v),C.fromHSV(e.h,1,1),this._hsv_material.setProperty("mainColor",C)}}]),r}(p)).prototype,"hueSlider",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(m.prototype,"vsPicker",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomizationTry1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TestRenderer.ts"],(function(e){"use strict";var t,n,r,i,o,a,u,l,c,s,p,f,m,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.EffectAsset,l=e.MeshRenderer,c=e.Texture2D,s=e.Material,p=e.game,f=e.Game,m=e.rendering,y=e.Component},function(e){b=e.TestCustomPipeline}],execute:function(){var d,g,z,T,h,C,R,v,w,E,D;o._RF.push({},"4e76bq4zRFCjLc5XGqGwHL7","CustomizationTry1",void 0);var _=a.ccclass,x=a.property;u.get("builtin-standard"),e("CustomizationTry1",(d=_("CustomizationTry1"),g=x(l),z=x(c),T=x(s),h=x(u),d((v=t((R=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"mesh",v,i(t)),r(t,"tex",w,i(t)),r(t,"mat",E,i(t)),r(t,"effect",D,i(t)),t}n(t,e);var o=t.prototype;return o.start=function(){p.on(f.EVENT_RENDERER_INITED,(function(){m.setCustomPipeline("Test",new b)}))},o.update=function(e){},t}(y)).prototype,"mesh",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(R.prototype,"tex",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(R.prototype,"mat",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"effect",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=R))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,l,r,a,g,h,c,p,C,d,m,u,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,c=t.instantiate,p=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,T=t.Component}],execute:function(){var L,f,M,b,v,x,E,S,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(L=A("internal.DebugViewRuntimeControl"),f=y(r),M=y(r),b=y(r),L((E=e((x=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",E,n(e)),i(e,"singleModeToggle",S,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct TRT","Env TRT","TRT All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","TRT","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=c(s);l.parent=this.node,l.name="Buttons";var r=c(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var T=c(this.EnableAllCompositeModeButton.getChildByName("Label"));T.setPosition(i+(u>0?450:150),n,0),T.setScale(.75,.75,.75),T.parent=r;var L=T.getComponent(p);L.string=u?"----------Composite Mode----------":"----------Single Mode----------",L.color=a.WHITE,L.overflow=0,this.labelComponentList[this.labelComponentList.length]=L}n-=20;for(var f=0,M=0;M<this.strSingle.length;M++,f++){M===this.strSingle.length>>1&&(i+=200,f=0);var b=M?c(this.singleModeToggle):this.singleModeToggle;b.setPosition(i,n-20*f,0),b.setScale(.5,.5,.5),b.parent=this.singleModeToggle.parent;var v=b.getComponentInChildren(C);v.string=this.strSingle[M],this.textComponentList[this.textComponentList.length]=v,this.textContentList[this.textContentList.length]=v.string,b.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[M]=b}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var x=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=x;var E=c(this.EnableAllCompositeModeButton);E.setPosition(i+90,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.changeTextColor,this),E.parent=l,(x=E.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=x;var S=c(this.EnableAllCompositeModeButton);S.setPosition(i+200,n,0),S.setScale(.5,.5,.5),S.on(m.EventType.CLICK,this.hideUI,this),S.parent=this.node.parent,(x=S.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=x,this.hideButtonLabel=x,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=c(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?c(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(T)).prototype,"compositeModeToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(x.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(x.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=x))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/DemoScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PokiPlatform.ts"],(function(e){"use strict";var t,o,a,i,r,n,c,u,l,s,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,n=e._decorator,c=e.Label,u=e.game,l=e.AudioSource,s=e.log,p=e.Component},function(e){h=e.CCPokiSDK}],execute:function(){var d,m,S,y,f;r._RF.push({},"02a8cG1kBZMb6HG0cbbzmxL","DemoScript",void 0);var R=n.ccclass,k=n.property;e("DemoScript",(d=R("DemoScript"),m=k({type:c}),d((f=t((y=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,a(t,"outputLabel",f,i(t)),t.audioSource=null,t}o(t,e);var r=t.prototype;return r.start=function(){u.on(h.EVENT_REWARD_BREAK_DONE,this.onRewardBreakDone,this),u.on(h.EVENT_COMMERCIAL_BREAK_DONE,this.onCommercialBreakDone,this),u.on(h.EVENT_SHRABLE_URL_READY,this.onSharableLinkReady,this),this.audioSource=this.getComponent(l)},r.onShareableLinkClicked=function(e){h.shareableURL({difficulty:"easy",lives:3})},r.onSharableLinkReady=function(){var e=arguments[0];s("SharableURL:",e),this.outputLabel.string=e},r.onRewardBreakClicked=function(e){this.audioSource.pause(),h.gameplayStop(),h.rewardBreak()},r.onRewardBreakDone=function(){var e=arguments[0];e?(this.outputLabel.string="Reward video success.",s("Revive Player"),h.gameplayStart()):s("Game End Screen"),this.audioSource.play()},r.onCommercialBreakClicked=function(e){this.audioSource.pause(),h.gameplayStop(),h.commercialBreak()},r.onCommercialBreakDone=function(){h.gameplayStart(),this.audioSource.play()},t}(p)).prototype,"outputLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=y))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/DoorHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TriggerObserver.ts"],(function(t){"use strict";var r,e,n,o,i,s,c;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.v3,i=t.tween,s=t.easing},function(t){c=t.TriggerObserver}],execute:function(){var u;e._RF.push({},"58429SjaWJJmb0rwScARG7h","DoorHandler",void 0);var a=n.ccclass,p=(n.property,o(0,-3,0)),l=o(0,3,0);t("DoorHandler",a("DoorHandler")(u=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.start=function(){},n.onEnter=function(t,r){i(this.node).by(.5,{position:p},{easing:s.expoOut}).start()},n.onExit=function(t,r){i(this.node).by(.5,{position:l},{easing:s.expoOut}).start()},e}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/EasyController.ts",["cc"],(function(n){"use strict";var t,e,o;return{setters:[function(n){t=n.cclegacy,e=n._decorator,o=n.director}],execute:function(){t._RF.push({},"cc933ijiadBG47GZ61xXA52","EasyController",void 0);e.ccclass,e.property;var r=n("EasyControllerEvent",(function(){}));r.CAMERA_ROTATE="EasyControllerEvent.CAMERA_ROTATE",r.CAMERA_ZOOM="EasyControllerEvent.CAMERA_ZOOM",r.MOVEMENT="EasyControllerEvent.MOVEMENT",r.MOVEMENT_STOP="EasyControllerEvent.MOVEMENT_STOP",r.JUMP="EasyControllerEvent.JUMP";n("EasyController",function(){function n(){}return n.on=function(n,t,e){o.getScene().on(n,t,e)},n.off=function(n,t,e){var r;null==(r=o.getScene())||r.off(n,t,e)},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/EmissionChange.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,n,a,o,l,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Texture2D,c=e.Material,u=e.director,s=e.Component}],execute:function(){var p,f,m,h,y,g,b,d,_;a._RF.push({},"7a27eN2p4FNAre81NNg1Wlb","EmissionChange",void 0);var v=o.ccclass,T=o.property;e("EmissionChange",(p=v("EmissionChange"),f=T({type:l}),m=T({type:l}),h=T({type:c}),p((b=t((g=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"colorRef",b,n(t)),r(t,"textureRef",d,n(t)),r(t,"material",_,n(t)),t}i(t,e);var a=t.prototype;return a.setTimeScale=function(e){u.calculateDeltaTime=function(t){t||(t=performance.now()),this._deltaTime=(t-this._lastUpdate)/1e3,this._deltaTime*=e,this._lastUpdate=t}},a.start=function(){this.setTimeScale(.5)},a.update=function(e){},t}(s)).prototype,"colorRef",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(g.prototype,"textureRef",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(g.prototype,"material",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xstate.fsm.mjs_cjs=&original=.js","./GameCommon.ts","./TargetPractice.ts","./AudioHandler.ts","./GameHandler.ts","./TriggerObserver.ts","./HumanoidPractice.ts","./xstate.fsm.js"],(function(e){"use strict";var t,n,i,a,o,s,r,l,c,u,d,I,h,A,m,T,E,N,H,_,f,p,O,y,v,M,D,R,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,r=e.BoxCollider,l=e.AnimationComponent,c=e.SkeletalAnimation,u=e.Animation,d=e.sys,I=e.v3,h=e.find},null,function(e){A=e.EnemyState,m=e.BBOX_HEAD,T=e.BBOX_BODY,E=e.GameEventType},function(e){N=e.TargetPracticeIdle,H=e.TargetPracticeRunning,_=e.TargetPracticeDead},function(e){f=e.AudioHandler},function(e){p=e.GameHandler},function(e){O=e.TriggerObserver},function(e){y=e.HumanoidIdle,v=e.HRun,M=e.HumanoidDead,D=e.HumanoidHurt,R=e.HumanoidAttack},function(e){S=e.default}],execute:function(){var F,g,C,P,G,L,b,z,x,k,B,U;o._RF.push({},"f33b4ABr5ZGNaHFI3XTS5pC","EnemyHandler",void 0);var w=s.ccclass,j=s.property,V=S.createMachine,X=S.interpret,K={initial:A.IDLE,context:{},states:(F={},F[A.IDLE]=N,F[A.RUNNING]=H,F[A.DEAD]=_,F)},Y={initial:A.IDLE,context:{},states:(g={},g[A.IDLE]=y,g[A.RUNNING]=v,g[A.DEAD]=M,g[A.HURT]=D,g[A.ATTACK]=R,g)};e("EnemyHandler",(C=w("EnemyHandler"),P=j({type:r}),G=j({type:l}),L=j({type:c}),C(((U=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"colliders",x,a(t)),i(t,"animHandle",k,a(t)),i(t,"skAnimHandle",B,a(t)),t.audioHandler=null,t.gameHandler=null,t.stateMachine=null,t.wayPoints=[],t.health=void 0,t}n(t,e);var o=t.prototype;return o.onLoad=function(){var e=this.colliders;e[0].name=m,e[1].name=T;var t={node:this.node,component:this};if(K.context=t,Y.context=t,this.animHandle){this.animHandle.on(u.EventType.FINISHED,this.onAnimFinished,this);var n=V(K);this.stateMachine=X(n),d.hasFeature(d.Feature.INPUT_TOUCH)?(e[0].size=I(15,12,10),e[1].size=I(25,22,15)):(e[0].size=I(12,12,10),e[1].size=I(20,22,15))}if(this.skAnimHandle){this.skAnimHandle.on(u.EventType.FINISHED,this.onAnimFinished,this);var i=V(Y);this.stateMachine=X(i),d.hasFeature(d.Feature.INPUT_TOUCH)?(e[0].size=I(.6,.4,.25),e[1].size=I(.8,1.5,.25)):(e[0].size=I(.3,.3,.25),e[1].size=I(.5,1.5,.25))}this.stateMachine.start();var a=h("/GameHandler");this.audioHandler=a.getComponent(f),this.gameHandler=a.getComponent(p)},o.start=function(){},o.onEnter=function(e,t){this.stateMachine.send({type:E.TRIGGER_ENTERED,value:{t:e,e:t}})},o.onExit=function(e,t){this.stateMachine.send({type:E.TRIGGER_EXITED,value:{t:e,e:t}})},o.resetEnemy=function(e){this.resetContext(e),e.next_point=1,e.reached_destination=!1,this.colliders.forEach((function(e){e.enabled=!0}))},o.resetContext=function(e){this.health=100},o.onAnimFinished=function(e,t){var n={n:t.name,s:t};this.stateMachine.send({type:E.ANIM_FINISHED,value:n})},o.onGameUpdate=function(e){this.stateMachine.send({type:E.UPDATE,value:e})},o.onSpawnEvent=function(e){this.stateMachine.send({type:E.ENEMY_SPAWN,value:{s:e}})},o.onDestroy=function(){this.stateMachine.stop(),this.animHandle&&this.animHandle.off(u.EventType.LASTFRAME,this.onAnimFinished,this),this.skAnimHandle&&this.skAnimHandle.off(u.EventType.FINISHED,this.onAnimFinished,this)},t}(O)).ANIMATION_HIT_REACTION="HitReaction",U.ANIMATION_DEATH_1="Death1",U.ANIMATION_DEATH_2="Death2",U.ANIMATION_COVER_2_STAND="Cover2Stand",U.ANIMATION_SHOOTING="",U.ANIMATION_EMERGE_FROM_COVER="EmergeFromCover",U.ANIMATION_BACK_TO_COVER="BackToCover",U.ANIMATION_RIFLE_IDLE="RifleIdle",U.ANIMATION_RIFLE_SHOOTING="RifleShooting",U.ANIMATION_PISTOL_IDLE="PistolIdle",U.ANIMATION_PISTOL_SHOOTING="PistolShoot_Stand",U.ANIMATION_PISTOL_SHOOTING_FROM_COVER="PistolShoot_FromCover",U.ANIMATION_PISTOL_RUN="PistolRun",U.ANIMATION_TERRIFIED="Terrified",x=t((z=U).prototype,"colliders",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(z.prototype,"animHandle",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"skAnimHandle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=z))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameCommon.ts",["cc"],(function(e){"use strict";var E,i,t,a,o,n,T,r,s,A,d,_;return{setters:[function(e){E=e.cclegacy,i=e.color,t=e.AnimationClip,a=e.Game,o=e.v3,n=e.Vec3,T=e.randomRangeInt,r=e.instantiate,s=e.tween,A=e.randomRange,d=e.easing,_=e.bezier}],execute:function(){e({PlayAnimationOnHandle:function(e,E,i){void 0===i&&(i=!1);e.play(E);var a=e.getState(E);a.wrapMode=i?t.WrapMode.Reverse:t.WrapMode.Normal},PlayDooberAnimation:function(e,E,i,t,a,I,m){void 0===a&&(a=200);void 0===I&&(I=10);void 0===m&&(m=.25);var N=i.worldPosition,l=t.worldPosition,c=o();n.add(c,N,l),c.multiplyScalar(.5),c.x+=(T(-1,1)<1?-1:1)*a;for(var R=function(){var t=r(e);t.worldPosition=i.worldPosition,s(t).delay(.125*S+A(.1,.125)).call((function(){E.addChild(t)})).to(m,{worldPosition:l},{easing:d.expoIn,onUpdate:function(e,E){var i=_(N.x,c.x,c.x,l.x,E),t=_(N.y,c.y,c.y,l.y,E);e.setWorldPosition(i,t,0)}}).call((function(){t.removeFromParent()})).start()},S=0;S<I;S++)R()},timeScalerDT:function(e){if(this._useFixedDeltaTime=e,e)return this._startTime=performance.now(),this.frameTime/1e3;var E=performance.now();this._deltaTime=E>this._startTime?(E-this._startTime)/1e3:0,this._deltaTime>a.DEBUG_DT_THRESHOLD&&(this._deltaTime=this.frameTime/1e3);return this._startTime=E,this._deltaTime*this.timeScale}}),E._RF.push({},"c5a88tcC/9GWb4fciAvDejX","GameCommon",void 0);e("RELOAD_BUTTON_DATA","reload"),e("GameEventType",{RESOLVE:"RESOLVE",REJECT:"REJECT",UPDATE:"UPDATE",ANIM_FINISHED:"ANIM_FINISHED",ANIM_STARTED:"ANIM_STARTED",ENEMY_HIT:"ENH",ENEMY_KILLED:"ENK",PLAYER_HIT:"PLH",USER_INPUT:"UIN",ENEMY_SPAWN:"ESP",SEGMENT_END:"SE",SEGMENT_START:"SS",GUN_CHANGED:"GC",AMMO_COUNT_CHANGED:"ACC",TRIGGER_ENTERED:"TRE",TRIGGER_EXITED:"TRX",PLATFORM_EVENT:"PLATE"}),e("QGGameInput",{MOUSE_BUTTON_DOWN:"mdown",MOUSE_MOVE:"mmove",KEY_DOWN:"kdown",BUTTON_CLICK:"btnclick",SLIDER_MOVED:"smove",TOGGLE_GROUP_CHECKED:"tbtnclick"}),e("SplicedData",(function(){this.spIndex=void 0,this.spNum=void 0,this.splicedPoint=void 0,this.targetIndex=void 0,this.segmentHandler=void 0})),e("GameState",{PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected",RUNNING:"running",PAUSED:"paused",OVER:"over",MENU:"menu",CUSTOMIZE:"customize",W4REVIVE:"w4revive"}),e("EnemyState",{IDLE:"idle",RUNNING:"running",DEAD:"dead",ATTACK:"attack",HURT:"hurt"}),e("PlayerState",{IDLE:"idle",RUNNING:"running",DEAD:"dead",ATTACK:"attack",RELOAD:"reload",INSPECT:"inspect",STAND:"stand",TUTORIAL:"tutorial"}),e("PlayerAnimations",{IDLE:"idle",RUN:"run",INSPECT:"inspect",FIRE:"fire",RELOAD:"reload"}),e("BBOX_HEAD","h"),e("BBOX_BODY","b"),e("SFX",{SHOOT:"shoot",IMPACT1:"impact-1",IMPACT2:"impact-2",IMPACT3:"impact-3",IMPACT4:"impact-4",RELOAD:"handgun_01-04_reload_out_of_ammo",DRAIN:"drain",HEADSHOT:"headshot",CRACKSHOT:"crackshot",AWESOME:"awesome",INCREDIBLE:"incredible",INSANE:"insane",COMBO:"combo",WITNESS:"witness",ARFAILED:"ARFailed",ARSUCCESS:"ARSuccess"}),e("GunConfigs",[{model:0,flashFx:0,name:"Pistol",damage:50,clipSize:6,pieces:4,sfx_shot:"",sfx_reload:""},{model:1,flashFx:1,name:"Revolver",damage:100,clipSize:15,pieces:4,sfx_shot:"",sfx_reload:""}]),e("Difficulty",{EASY:0,MEDIUM:1,HARD:2}),e("GameColors",{YELLOW:i("#FFC200"),RED:i("#FF3213"),GREEN:i("#67CF5E"),BLUE:i("#648EFF"),LIGHT_BLUE:i("#64ECFF")}),e("GameConfig",{TIMEGAINS_HEADHOST:[2,1,1],TIMEGAINS_KILL:[1,0,0],PLAYER_RUNNING_SPEED:[150,180,200,210],PLAYER_WALKING_SPEED:[50,40,30,30],PLAYER_ACCELERATION:[80,80,85,90],CUSTOMIZATION_COST:100,TIME_ON_REVIVE:20,AVAILABLE_GAME_TIME:60,PLAYER_HIT_PENALITY:1,RELOAD_FAILED_PENALITY:1,UPGRADES:{ClipSize:{cost:[100,200,400],upgrade:[6,8,12,16]},Speed:{cost:[100,150,250],upgrade:[150,180,200,210]}}});E._RF.pop()}}}));

System.register("chunks:///_virtual/GameCustomize.ts",["cc","./GameCommon.ts","./GameMenu.ts","./Inventory.ts","./ColorPickerWidget.ts","./ButtonNames.ts","./PokiPlatform.ts","./UpgradableStat.ts"],(function(e){"use strict";var n,a,t,o,i,r,s,l,c,d,u,p,v,m,g,C,S,h,_,y,M,b,f,A,I,U,T,E,B,R,D;return{setters:[function(e){n=e.cclegacy,a=e.find,t=e.AnimationComponent,o=e.Label,i=e.Sprite,r=e.tween,s=e.UIOpacity,l=e.Animation,c=e.AnimationClip,d=e.Color,u=e.color,p=e.v3},function(e){v=e.GameConfig,m=e.PlayAnimationOnHandle,g=e.PlayDooberAnimation,C=e.GameEventType,S=e.GameState,h=e.QGGameInput,_=e.SFX},function(e){y=e.GameMenu},function(e){M=e.Inventory},function(e){b=e.ColorPickerWidget},function(e){f=e.BUY_BUTTON_DATA,A=e.BUY_UPGRADE_SPEED_DATA,I=e.BUY_UPGRADE_CLIP_SIZE_DATA,U=e.CLAIM_REWARD_BUTTON_DATA,T=e.MESSAGEBOX_BTN1_DATA,E=e.MESSAGEBOX_BTN2_DATA,B=e.CLOSE_BUTTON_DATA},function(e){R=e.CCPokiSDK},function(e){D=e.UpgradableStat}],execute:function(){var O;n._RF.push({},"d57ecVWvgJB/oj6xxd+WjnS","GameCustomize",void 0);var N=e("CAM_ANIMATIONS",["barrel_view","base_view","handle_view","highlights_view"]);function w(e,n){e.barrelMaterial,e.baseMaterial,e.gripMaterial,e.highlightsMaterial;var a=M.instance.data.selection.colors[["barrel","base","handle","highlights"][n]],t=u(a[0],a[1],a[2]);x.cpw.color=t}function G(e,n){var a=[e.barrelMaterial,e.baseMaterial,e.gripMaterial,e.highlightsMaterial],t=(M.instance.data,n||x.partIndex),o=a[t],i=x.cpw.color;o.setProperty(["emissive","albedo","albedo","emissive"][t],i),x.updatedColors[["barrel","base","handle","highlights"][t]]=[i.r,i.g,i.b]}function P(e,n){void 0===n&&(n=!0),x.cRoomAnimHandle.play(N[e]);var a=x.cRoomAnimHandle.getState(N[e]);x.animState=a,x.animState.wrapMode=n?c.WrapMode.Normal:c.WrapMode.Reverse}function L(e){e.component.user_inventory.coins>=v.CUSTOMIZATION_COST?x.buyButtonLabel.color=d.WHITE:x.buyButtonLabel.color=d.RED}function z(e){e.playerComponent.audioHandler.playSFX(_.ARFAILED),r(x.claimRewardButton).to(.125,{scale:p(1.1,1.1,1)}).to(.125,{scale:p(1,1,1)}).repeat(3).start()}var H="customize_ui_animate_in",x=e("GameCustomize",{handle:null,cpw:null,partIndex:0,cRoom:null,cRoomAnimHandle:null,animState:null,unSavedChanges:!1,claimRewardButton:null,buyButtonLabel:null,ClipSizeUpgrade:null,SpeedUpgrade:null,updatedColors:{barrel:[],base:[],handle:[],highlights:[]},entry:function(e,n){x.handle=a("Canvas/MainMenu/CustomizationUI"),x.cRoom=a("GunCustomization"),x.cRoomAnimHandle=x.cRoom.getComponent(t),x.cpw=a("Canvas/MainMenu/CustomizationUI/Gradiant").getComponent(b),x.claimRewardButton=a("Canvas/MainMenu/ClaimReward"),x.buyButtonLabel=a("Canvas/MainMenu/CustomizationUI/BuyButton/value-001").getComponent(o),x.ClipSizeUpgrade=a("Canvas/MainMenu/UpgradeUI/StatsList/ClipSizeStat").getComponent(D),x.SpeedUpgrade=a("Canvas/MainMenu/UpgradeUI/StatsList/SpeedStat").getComponent(D);var c=x.cRoom.getChildByName("CCamera");c.setPosition(2.442,14.814,-197.32),c.setRotationFromEuler(-12.236,180,0),x.ClipSizeUpgrade.setStat("clip_size",v.UPGRADES.ClipSize),x.SpeedUpgrade.setStat("speed",v.UPGRADES.Speed),a("Canvas/MainMenu/CustomizationUI/Gradiant").getComponent(i).enabled=!0;var d=e.component;L(e),x.cpw.node.parent.on("picked",(function(){G(d),x.unSavedChanges=!0})),x.unSavedChanges=!1;var u=a("Canvas/TransitionScreen");u.active=!0,r(u.getComponent(s)).set({opacity:0}).to(.5,{opacity:255}).delay(.25).call((function(){y.handle.active=!0,x.handle.active=!0,d.playerComponent.node.active=!1,x.cRoom.active=!0,w(d,x.partIndex),x.handle.active=!1})).to(.5,{opacity:0}).call((function(){u.active=!1,P(x.partIndex),x.handle.active=!0,m(y.animHandle,H)})).start(),y.animHandle.on(l.EventType.PLAY,d.onAnimationStart,d),y.animHandle.on(l.EventType.FINISHED,d.onAnimationFinished,d)},exit:function(e,n){x.handle.active=!1;var a=e.component;y.animHandle.off(l.EventType.PLAY,a.onAnimationStart,a),y.animHandle.off(l.EventType.FINISHED,a.onAnimationFinished,a),x.cpw.node.parent.off("picked",(function(){G(a)}))},onButtonClick:function(e,n){var a,t=n.value,o=e.component,i=t.e.d,r=1==e.component.messageBox.buttons.length;switch(i){case B:x.unSavedChanges?(o.messageBox.message="Your customizatin will be lost. Do you want to Continue?",o.messageBox.buttons=["Yes","No"],o.showMessageBox()):m(y.animHandle,H,!0);break;case E:o.hideMessageBox();break;case T:o.hideMessageBox(),r||m(y.animHandle,H,!0);break;case U:x.claimRewardButton.active=!1,R.rewardBreak();break;case I:var s=x.ClipSizeUpgrade.getUpgradeCost();s>-1&&o.user_inventory.coins>=s?(x.ClipSizeUpgrade.upgradeStat(),x.ClipSizeUpgrade.updateUI(),o.coinDisplay.valueLabel.string=o.user_inventory.coins.toString(),o.updateGunConfig(),g(o.coinPrefab,x.handle,o.coinDisplay.node,x.ClipSizeUpgrade.node)):z(o);break;case A:var l=x.SpeedUpgrade.getUpgradeCost();l>-1&&o.user_inventory.coins>=l?(x.SpeedUpgrade.upgradeStat(),x.SpeedUpgrade.updateUI(),o.coinDisplay.valueLabel.string=o.user_inventory.coins.toString(),o.updateGunConfig(),g(o.coinPrefab,x.handle,o.coinDisplay.node,x.SpeedUpgrade.node)):z(o);break;case f:if(!x.unSavedChanges)return;o.user_inventory.coins>=v.CUSTOMIZATION_COST?(o.user_inventory.coins-=v.CUSTOMIZATION_COST,o.coinDisplay.valueLabel.string=o.user_inventory.coins.toString(),x.unSavedChanges=!1,a=M.instance.data,["barrel","base","handle","highlights"].forEach((function(e,n){x.updatedColors[e].length>0&&(a.selection.colors[e]=x.updatedColors[e])})),M.instance.save(),g(o.coinPrefab,x.handle,o.coinDisplay.node,x.buyButtonLabel.node.parent)):z(o)}},on:(O={},O[C.PLATFORM_EVENT]={actions:function(e,n){var a=n.value,t=e.component;a.e==R.EVENT_REWARD_BREAK_DONE&&1==a.d&&(t.user_inventory.coins+=v.CUSTOMIZATION_COST,t.coinDisplay.valueLabel.string=t.user_inventory.coins.toString(),M.instance.save(),L(e))}},O[C.ANIM_FINISHED]=[{target:S.MENU,cond:function(e,n){var a=n.value;return"screen_transition"==a.n&&a.s.wrapMode==c.WrapMode.Normal}},{actions:function(e,n){var t=n.value,o=e.component,i=t.s.wrapMode==c.WrapMode.Reverse;if(t.n==H&&i){var l=a("Canvas/TransitionScreen");l.active=!0,r(l.getComponent(s)).set({opacity:0}).to(.5,{opacity:255}).call((function(){x.loadFromInventory(o),x.cRoom.active=!1,o.playerComponent.node.active=!0;var n={n:"screen_transition",s:{wrapMode:c.WrapMode.Normal}};e.component.stateMachine.send({type:C.ANIM_FINISHED,value:n})})).delay(.25).to(.5,{opacity:0}).call((function(){l.active=!1})).start()}else t.n!=H||i||(o.user_inventory.coins<v.CUSTOMIZATION_COST?x.claimRewardButton.active=!0:x.claimRewardButton.active=!1)}}],O[C.USER_INPUT]={actions:function(e,n){var a=n.value,t=e.component;if(a.i==h.TOGGLE_GROUP_CHECKED){var o=a.e.e;P(x.partIndex,!1);var i=o.node.getSiblingIndex();x.partIndex=i,w(t,i),t.scheduleOnce((function(){P(i)}),.5)}else if(a.i==h.SLIDER_MOVED){a.e.e;G(t),x.unSavedChanges=!0}else a.i==h.BUTTON_CLICK&&x.onButtonClick(e,n)}},O),loadFromInventory:function(e){var n=[e.barrelMaterial,e.baseMaterial,e.gripMaterial,e.highlightsMaterial],a=M.instance.data,t=["emissive","albedo","albedo","emissive"];["barrel","base","handle","highlights"].forEach((function(e,o){var i=a.selection.colors[e],r=new d(i[0],i[1],i[2]);n[o].setProperty(t[o],r)}))}});n._RF.pop()}}}));

System.register("chunks:///_virtual/GameHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerHandler.ts","./GameCommon.ts","./GameRunning.ts","./GamePaused.ts","./GameMenu.ts","./GameOver.ts","./xstate.fsm.mjs_cjs=&original=.js","./AudioHandler.ts","./Inventory.ts","./GameCustomize.ts","./RoundScoreItem.ts","./MessageBox.ts","./PokiPlatform.ts","./AnimationNames.ts","./GameWaitingRevive.ts","./UI_Joystick.ts","./xstate.fsm.js"],(function(e){"use strict";var t,n,i,a,o,s,l,r,u,c,h,p,m,d,y,g,f,_,v,M,T,E,b,C,S,A,R,O,N,D,I,G,U,H,P,w,B,x,L,z,V,k,F,K,W,Y,j,J,Z,Q,X,q,$,ee;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,l=e._decorator,r=e.v3,u=e.v2,c=e.Prefab,h=e.Node,p=e.AnimationComponent,m=e.Material,d=e.find,y=e.Label,g=e.NodePool,f=e.instantiate,_=e.game,v=e.sys,M=e.input,T=e.Input,E=e.resources,b=e.log,C=e.tween,S=e.easing,A=e.Vec3,R=e.PhysicsSystem,O=e.EventMouse,N=e.v4,D=e.AnimationClip,I=e.Component},function(e){G=e.PlayerHandler},function(e){U=e.GameState,H=e.Difficulty,P=e.GunConfigs,w=e.GameConfig,B=e.GameEventType,x=e.timeScalerDT,L=e.PlayAnimationOnHandle,z=e.QGGameInput},function(e){V=e.GameRunning},function(e){k=e.GamePaused},function(e){F=e.GameMenu},function(e){K=e.GameOver},null,function(e){W=e.AudioHandler},function(e){Y=e.Inventory},function(e){j=e.GameCustomize},function(e){J=e.RoundScoreItem},function(e){Z=e.MessageBox},function(e){Q=e.CCPokiSDK},function(e){X=e.MESSAGEBOX_ANIMATE_IN},function(e){q=e.GameWaitingRevive},function(e){$=e.UI_Joystick},function(e){ee=e.default}],execute:function(){var te,ne,ie,ae,oe,se,le,re,ue,ce,he,pe,me,de,ye,ge,fe,_e,ve,Me,Te,Ee,be,Ce,Se,Ae,Re,Oe,Ne,De,Ie,Ge,Ue,He;s._RF.push({},"5b442rJG2VLMo8L56oPjTg/","GameHandler",void 0);var Pe=l.ccclass,we=l.property,Be=ee.createMachine,xe=ee.interpret,Le={id:"game",initial:U.MENU,context:{},states:(te={},te[U.RUNNING]=V,te[U.PAUSED]=k,te[U.MENU]=F,te[U.OVER]=K,te[U.CUSTOMIZE]=j,te[U.W4REVIVE]=q,te)},ze=r(),Ve=u();e("GameHandler",(ne=Pe("GameHandler"),ie=we(c),ae=we(c),oe=we(c),se=we(c),le=we(G),re=we(h),ue=we(J),ce=we(p),he=we(Z),pe=we($),me=we(m),de=we(m),ye=we(m),ge=we(m),fe=we(m),ne((Me=t((ve=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,i(t,"shotMessagePrefab",Me,a(t)),i(t,"coinPrefab",Te,a(t)),i(t,"HUMANOID_TARGET",Ee,a(t)),t.humanoid_target_pool=null,i(t,"DUMMY_TARGET",be,a(t)),t.dummy_target_pool=null,i(t,"playerComponent",Ce,a(t)),i(t,"bulletDisplay",Se,a(t)),i(t,"coinDisplay",Ae,a(t)),i(t,"messageBoxAnimHandle",Re,a(t)),i(t,"messageBox",Oe,a(t)),i(t,"joystickHandler",Ne,a(t)),i(t,"barrelMaterial",De,a(t)),i(t,"baseMaterial",Ie,a(t)),i(t,"highlightsMaterial",Ge,a(t)),i(t,"gripMaterial",Ue,a(t)),i(t,"environmentMaterial",He,a(t)),t.audioHandler=null,t.stateMachine=null,t.user_inventory=void 0,t.availableTime_lbl=null,t.availableTime_Shadow_lbl=null,t.headShots_lbl=null,t.accuracy_lbl=null,t.difficulty=H.EASY,t._availableTime=0,t}n(t,e);var s=t.prototype;return s.updateGunConfig=function(){var e=this.user_inventory.selection.upgrades.clip_size;P[this.user_inventory.selection.gun].clipSize=w.UPGRADES.ClipSize.upgrade[e]},s.start=function(){this.availableTime_Shadow_lbl=d("Canvas/Gameplay/TimerDisplay/AvailableTime_Shadow").getComponent(y),this.availableTime_lbl=d("Canvas/Gameplay/TimerDisplay/bg/Timer/Value").getComponent(y),this.headShots_lbl=d("Canvas/Gameplay/TimerDisplay/bg/HeadShots/Value").getComponent(y),this.accuracy_lbl=d("Canvas/Gameplay/TimerDisplay/bg/Accuracy/Value").getComponent(y),d("Canvas/MainMenu/CustomizationUI/BuyButton/value").getComponent(y).string="-"+w.CUSTOMIZATION_COST.toString(),d("Canvas/MainMenu/ClaimReward/Hexagon/value").getComponent(y).string="+"+w.CUSTOMIZATION_COST.toString(),this.audioHandler=this.getComponent(W);var e={node:this.node,component:this};Le.context=e;var t=Be(Le);this.stateMachine=xe(t),this.stateMachine.start(),this.user_inventory=Y.instance.data,this.updateGunConfig(),this.playerComponent.useGun(this.user_inventory.selection.gun),this.stateMachine.send({type:B.GUN_CHANGED,value:this.playerComponent.gunCfg}),this.humanoid_target_pool=new g,this.dummy_target_pool=new g;for(var n=0;n<10;n++)this.humanoid_target_pool.put(f(this.HUMANOID_TARGET)),this.dummy_target_pool.put(f(this.DUMMY_TARGET));this.messageBoxAnimHandle.on(p.EventType.FINISHED,this.onAnimationFinished,this),this.restartGame(),Q.gameLoadingFinished(),_.on(Q.EVENT_REWARD_BREAK_DONE,this.onRewardBreakDone,this),_.on(Q.EVENT_COMMERCIAL_BREAK_DONE,this.onCommercialBreakDone,this),_.on(Q.EVENT_COMMERCIAL_BREAK_START,this.onCommercialBreakStart,this),v.hasFeature(v.Feature.INPUT_TOUCH)?M.on(T.EventType.TOUCH_START,this.onTouchStart,this):(M.on(T.EventType.MOUSE_DOWN,this.onMouseDown,this),M.on(T.EventType.MOUSE_MOVE,this.onMouseMove,this),M.on(T.EventType.KEY_DOWN,this.onKeyDown,this)),_.timeScale=1,_._calculateDT=x,this.user_inventory.showTutorial&&E.preload("tutorial/Tutorial",c,(function(e,t){b(e?e.message:"Resource Loaded")}))},s.onKeyDown=function(e){this.playerComponent.onKeyDown(e)},s.updateStatsFromContext=function(e){var t=e.shots_fired?Math.ceil(e.shots_hit/e.shots_fired*100):0;this.accuracy_lbl.string=""+t,this.headShots_lbl.string=""+e.headshots,ze.set(1.5,1.5,1.5);var n=this.accuracy_lbl;C(n.node).to(.25,{scale:ze},{easing:S.expoOut}).call((function(){n.string=t.toString()})).to(.25,{scale:A.ONE},{easing:S.expoIn}).start();var i=this.headShots_lbl;C(i.node).to(.25,{scale:ze},{easing:S.expoOut}).call((function(){i.string=e.headshots.toString()})).to(.25,{scale:A.ONE},{easing:S.expoIn}).start()},s.onTouchStart=function(e){e.getUILocation(Ve),this.playerComponent.crossHair.setWorldPosition(Ve.x,Ve.y,0),e.getLocation(Ve),this.playerComponent.playerCamera.screenPointToRay(Ve.x,Ve.y,this.playerComponent.shootRay),this.playerComponent.mouseLocation.set(Ve.x,Ve.y);if(this.playerComponent.lastCollider=null,R.instance.raycastClosest(this.playerComponent.shootRay,4294967295,1e7,!0)){var t=R.instance.raycastClosestResult.collider;this.playerComponent.lastCollider=t}var n=new O("ButtonClick");n.setButton(O.BUTTON_LEFT),this.onMouseDown(n)},s.onJoyMovement=function(e){Ve.set(e)},s.onJoyMovementStop=function(){if(b("Stopped Movement"),Ve.set(0,0),this.playerComponent.lastCollider){var e=new O("ButtonClick");e.setButton(O.BUTTON_LEFT),this.onMouseDown(e)}},s.onCommercialBreakStart=function(){var e={e:Q.EVENT_COMMERCIAL_BREAK_START,d:arguments[0]};this.stateMachine.send({type:B.PLATFORM_EVENT,value:e})},s.onCommercialBreakDone=function(){var e={e:Q.EVENT_COMMERCIAL_BREAK_DONE,d:arguments[0]};this.stateMachine.send({type:B.PLATFORM_EVENT,value:e})},s.onRewardBreakDone=function(){var e={e:Q.EVENT_REWARD_BREAK_DONE,d:arguments[0]};this.stateMachine.send({type:B.PLATFORM_EVENT,value:e})},s.restartGame=function(){this.availableTime=w.AVAILABLE_GAME_TIME,this.difficulty=H.EASY,this.environmentMaterial.setProperty("tilingOffset",N(1,1,0,0)),this.playerComponent.resetPlayer()},s.update=function(e){this.stateMachine.send({type:B.UPDATE,value:e})},s.onMouseDown=function(e){var t={e:e,i:z.MOUSE_BUTTON_DOWN};this.stateMachine.send({type:B.USER_INPUT,value:t})},s.onMouseMove=function(e){var t={e:e,i:z.MOUSE_MOVE};this.stateMachine.send({type:B.USER_INPUT,value:t})},s.onButtonClicked=function(e,t){var n={i:z.BUTTON_CLICK,e:{e:e,d:t}};this.stateMachine.send({type:B.USER_INPUT,value:n})},s.onAnimationFinished=function(e,t){t.name==X&&t.wrapMode==D.WrapMode.Reverse&&(this.messageBoxAnimHandle.node.active=!1);var n={n:t.name,s:t};this.stateMachine.send({type:B.ANIM_FINISHED,value:n})},s.onAnimationStart=function(e,t){this.stateMachine.send({type:B.ANIM_STARTED,value:{type:e,state:t}})},s.onToggleGroupChecked=function(e,t){b(e,t);var n={i:z.TOGGLE_GROUP_CHECKED,e:{e:e,d:t}};this.stateMachine.send({type:B.USER_INPUT,value:n})},s.onHueSliderChanged=function(e,t){var n=e.progress,i={i:z.SLIDER_MOVED,e:{e:e,d:t,hsv:{h:n,s:1,v:1}}};this.stateMachine.send({type:B.USER_INPUT,value:i})},s.showMessageBox=function(){this.messageBoxAnimHandle.node.active=!0,L(this.messageBoxAnimHandle,X)},s.hideMessageBox=function(){L(this.messageBoxAnimHandle,X,!0)},s.onPlayerHit=function(e){this.stateMachine.send({type:B.PLAYER_HIT,value:e})},s.onEnemyHit=function(e){var t=e.d;e.s;t.stateMachine.send({type:B.ENEMY_HIT,value:e}),this.stateMachine.send({type:B.ENEMY_HIT,value:e})},s.ShowShotFeedback=function(e,t){var n=this.playerComponent,i=f(this.shotMessagePrefab);n.crossHair.parent.addChild(i);var a=r(1.3,1.3,1);i.scale=a,n.crossHair.getWorldPosition(a),a.add3f(0,64,0),i.setWorldPosition(a);var o=i.getComponent(y);o.string=e,o.color=t,C(i).to(.125,{scale:r(1,1,1)},{onStart:function(e){e.active=!0},easing:S.expoOut}).delay(.5).to(.125,{scale:r(1,0,1)},{easing:S.expoIn}).call((function(){i.removeFromParent()})).start()},o(t,[{key:"availableTime",get:function(){return this._availableTime},set:function(e){var t=Math.max(0,e);if(this._availableTime<t){ze.set(1.5,1.5,1.5);var n=this.availableTime_lbl;C(n.node).to(.25,{scale:ze},{easing:S.expoOut}).call((function(){n.string=t.toString()})).to(.25,{scale:A.ONE},{easing:S.expoIn}).start();var i=this.availableTime_Shadow_lbl;C(i.node).to(.25,{scale:ze},{easing:S.expoOut}).call((function(){i.string=t.toString()})).to(.25,{scale:A.ONE},{easing:S.expoIn}).start()}else this.availableTime_lbl.string=t.toString(),this.availableTime_Shadow_lbl.string=t.toString();this._availableTime=t}}]),t}(I)).prototype,"shotMessagePrefab",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(ve.prototype,"coinPrefab",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(ve.prototype,"HUMANOID_TARGET",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ve.prototype,"DUMMY_TARGET",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(ve.prototype,"playerComponent",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ve.prototype,"bulletDisplay",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(ve.prototype,"coinDisplay",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(ve.prototype,"messageBoxAnimHandle",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(ve.prototype,"messageBox",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(ve.prototype,"joystickHandler",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(ve.prototype,"barrelMaterial",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(ve.prototype,"baseMaterial",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(ve.prototype,"highlightsMaterial",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(ve.prototype,"gripMaterial",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(ve.prototype,"environmentMaterial",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=ve))||_e));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameMenu.ts",["cc","./GameCommon.ts","./OnSegmentEvent.ts","./OnButtonClicked.ts","./Inventory.ts","./GameCustomize.ts","./ButtonNames.ts","./AnimationNames.ts","./PokiPlatform.ts","./OnPlatformEvent.ts"],(function(n){"use strict";var e,t,a,i,o,m,l,u,c,s,r,d,v,p,f,A,E,y,C;return{setters:[function(n){e=n.cclegacy,t=n.find,a=n.AnimationComponent,i=n.Animation,o=n.SkeletalAnimation,m=n.AnimationClip},function(n){l=n.PlayAnimationOnHandle,u=n.GameState,c=n.GameEventType,s=n.QGGameInput},function(n){r=n.Game_OnSegmentStart},function(n){d=n.OnPlayClicked},function(n){v=n.Inventory},function(n){p=n.GameCustomize},function(n){f=n.CUSTOMIZE_BUTTON_DATA,A=n.CLAIM_REWARD_BUTTON_DATA},function(n){E=n.MAINMENU_UI_ANIMATE_IN},function(n){y=n.CCPokiSDK},function(n){C=n.Game_OnPlatformEvent}],execute:function(){var T;e._RF.push({},"a3b54t7nLBOlJCDzgYWRmba","GameMenu",void 0);var I=n("GameMenu",{handle:null,statsHandle:null,buttons:null,animHandle:null,animPlaying:!1,entry:function(n,e){I.handle=t("Canvas/MainMenu"),I.handle.active=!0,I.animHandle=I.handle.getComponent(a),I.buttons=t("Canvas/MainMenu/Buttons"),I.buttons.active=!0,I.animPlaying=!1;var m=n.component;m.coinDisplay.setRoundValue(v.instance.data.coins,0),p.loadFromInventory(m),I.animHandle.on(i.EventType.PLAY,m.onAnimationStart,m),I.animHandle.on(i.EventType.FINISHED,m.onAnimationFinished,m),m.playerComponent.animHandle.play("inspect"),m.playerComponent.animHandle.on(o.EventType.FINISHED,I.onPlayerAnimationFinished,I)},onPlayerAnimationFinished:function(){l(I.animHandle,E)},exit:function(n,e){var t=n.component;n.prev_state=u.MENU,I.handle.active=!1,I.buttons.active=!1,I.animHandle.off(i.EventType.PLAY,t.onAnimationStart,t),I.animHandle.off(i.EventType.FINISHED,t.onAnimationFinished,t),t.playerComponent.animHandle.off(o.EventType.FINISHED,I.onPlayerAnimationFinished,I)},on:(T={},T[c.PLATFORM_EVENT]=C,T[c.ANIM_FINISHED]={target:u.CUSTOMIZE,cond:function(n,e){var t=e.value;if(t.n==E&&t.s.wrapMode==m.WrapMode.Reverse)return!0}},T[c.USER_INPUT]=[d,{actions:function(n,e){var t=e.value;t.i==s.BUTTON_CLICK&&t.e.d==f?l(I.animHandle,E,!0):t.i==s.BUTTON_CLICK&&t.e.d==A&&(p.claimRewardButton.active=!1,y.rewardBreak())}}],T[c.GUN_CHANGED]={actions:function(n,e){var t=n.component;t.bulletDisplay.children.forEach((function(n,e){n.active=!1,e<t.playerComponent.gunCfg.clipSize&&(n.active=!0)}))}},T[c.SEGMENT_START]=r,T)});e._RF.pop()}}}));

System.register("chunks:///_virtual/GameOver.ts",["cc","./GameCommon.ts","./Inventory.ts","./RoundScoreItem.ts","./OnButtonClicked.ts","./PokiPlatform.ts","./GameRunning.ts"],(function(n){"use strict";var t,e,a,o,c,s,i,r,m,u,l,p;return{setters:[function(n){t=n.cclegacy,e=n.find,a=n.AnimationComponent},function(n){o=n.PlayerAnimations,c=n.GameState,s=n.GameEventType},function(n){i=n.Inventory},function(n){r=n.RoundScoreItem},function(n){m=n.OnRestartButtonClicked,u=n.OnHomeButtonClicked},function(n){l=n.CCPokiSDK},function(n){p=n.GameRunning}],execute:function(){var v;t._RF.push({},"c5aa89O1YRB2Lv0Yfsj6QZ9","GameOver",void 0);var d=n("GameOver",{handle:null,animHandle:null,entry:function(n,t){var c=n.component;c.playerComponent.animHandle.play(o.IDLE);var s=i.instance.data;d.handle=e("Canvas/GameOver"),d.handle.active=!0,d.animHandle=d.handle.getComponent(a),d.animHandle.play();var m=e("Canvas/GameOver/StatsDisplay/Content").children;n.accuracy=n.shots_fired?Math.ceil(n.shots_hit/n.shots_fired*100):0,n.coins=n.headshots;["headshots","headshot_combo_max","accuracy","coins"].forEach((function(t,e){var a;(null!=(a=s.top_stats[t])?a:0)<n[t]&&(s.top_stats[t]=n[t]),m[e].getComponent(r).setRoundValue(n[t],s[t]?s[t]:s.top_stats[t])}));s.coins+=n.coins,i.instance.save(),c.coinDisplay.setRoundValue(s.coins,0),c.playerComponent.curSegmentHandler.clearEnemies(c),n.component.playerComponent.stateMachine.stop()},exit:function(n,t){d.handle.active=!1,n.prev_state=c.OVER},on:(v={},v[s.USER_INPUT]=[m,u],v[s.PLATFORM_EVENT]=[{target:[c.RUNNING],cond:function(n,t){var e=t.value;n.component;return e.e==l.EVENT_COMMERCIAL_BREAK_DONE&&n.next_state==c.RUNNING&&(n.component.restartGame(),n.component.playerComponent.stateMachine.start(),!0)}},{target:[c.MENU],cond:function(n,t){var e=t.value;n.component;if(e.e==l.EVENT_COMMERCIAL_BREAK_DONE&&n.next_state==c.MENU){var a=n.component.playerComponent;return a.stateMachine.stop(),n.component.restartGame(),a.stateMachine.start(),p.handle.active=!1,!0}return!1}}],v)});t._RF.pop()}}}));

System.register("chunks:///_virtual/GamePaused.ts",["cc","./GameCommon.ts","./GameRunning.ts","./OnButtonClicked.ts","./EnemyHandler.ts","./PokiPlatform.ts"],(function(n){"use strict";var e,t,a,o,i,c,u,r,m;return{setters:[function(n){e=n.cclegacy,t=n.find},function(n){a=n.GameState,o=n.GameEventType},function(n){i=n.GameRunning},function(n){c=n.OnResumeButtonClicked,u=n.OnHomeButtonClicked},function(n){r=n.EnemyHandler},function(n){m=n.CCPokiSDK}],execute:function(){var s;e._RF.push({},"62481b3FYxHDabtFcmuf8hH","GamePaused",void 0);var l=n("GamePaused",{handle:null,isAnimating:!1,entry:function(n,e){i.handle.active=!0,l.handle=t("Canvas/Gameplay/PauseScreen"),l.handle.active=!0;var a=n.component;a.playerComponent.animHandle.pause(),a.playerComponent.curSegmentHandler.enemyContainer.children.forEach((function(n){var e=n.getComponent(r);e.animHandle?e.animHandle.pause():e.skAnimHandle&&e.skAnimHandle.pause()}))},exit:function(n,e){l.handle.active=!1,n.prev_state=a.PAUSED},on:(s={},s[o.UPDATE]={},s[o.USER_INPUT]=[c,u],s[o.PLATFORM_EVENT]={target:[a.MENU],cond:function(n,e){var t=e.value;n.component;if(t.e==m.EVENT_COMMERCIAL_BREAK_DONE&&n.next_state==a.MENU){var o=n.component.playerComponent;return o.stateMachine.stop(),n.component.restartGame(),o.stateMachine.start(),i.handle.active=!1,!0}return!1}},s)});e._RF.pop()}}}));

System.register("chunks:///_virtual/GameRunning.ts",["cc","./GameCommon.ts","./OnAmmoChanged.ts","./OnUserInput2.ts","./OnSegmentEvent.ts","./OnEnemyHit.ts","./EnemyHandler.ts","./AnimationNames.ts","./PokiPlatform.ts","./ButtonNames.ts","./OnPlatformEvent.ts"],(function(n){"use strict";var a,e,t,i,o,m,l,r,s,c,p,v,u,E,d,_,T,A,f,y,S,I,P,g,h;return{setters:[function(n){a=n.cclegacy,e=n.find,t=n.Animation,i=n.AnimationClip,o=n.tween},function(n){m=n.GameState,l=n.GameEventType,r=n.PlayAnimationOnHandle,s=n.PlayerAnimations,c=n.PlayerState,p=n.QGGameInput,v=n.GameColors,u=n.GameConfig},function(n){E=n.Game_OnAmmoChanged},function(n){d=n.Game_OnUserInput},function(n){_=n.Game_OnSegmentEnd,T=n.Game_OnSegmentStart},function(n){A=n.Game_OnEnemyHit},function(n){f=n.EnemyHandler},function(n){y=n.HUD_ANIMATE_IN,S=n.HUD_ANIMATE_OUT,I=n.TIMEOUT_MESSAGE_SHOW},function(n){P=n.CCPokiSDK},function(n){g=n.PAUSE_BUTTON_DATA},function(n){h=n.Game_OnPlatformEvent}],execute:function(){var H;a._RF.push({},"2799eWIjFZPO4hsCbj3c81x","GameRunning",void 0);var G=0,C=n("GameRunning",{handle:null,animHandle:null,animPlaying:!1,pauseUpdate:!1,impactFX:null,entry:function(n,a){var i=n.component;C.handle=e("Canvas/Gameplay"),C.handle.active=!0,C.animHandle=C.handle.getComponent(t),C.animHandle.on(t.EventType.PLAY,i.onAnimationStart,i),C.animHandle.on(t.EventType.FINISHED,i.onAnimationFinished,i),C.pauseUpdate=!1,C.animHandle.play(y),C.animPlaying=!1,C.impactFX=C.impactFX?C.impactFX:e("Canvas/Gameplay/ImpactFX"),C.impactFX.active=!1,P.gameplayStart(),(!n.prev_state||n.prev_state!=m.PAUSED&&n.prev_state!=m.W4REVIVE)&&(i.playerComponent.stateMachine.send({type:l.USER_INPUT,value:{i:"mdown",e:{}}}),n.start_time=Date.now(),n.headshot_combo=0,i.restartGame(),n.headshots=0,n.headshot_combo_max=0,n.shots_hit=0,n.shots_fired=0,n.coins=0,n.revives_available=1,n.segments_covered=0,i.updateStatsFromContext(n))},exit:function(n,a){P.gameplayStop();var e=n.component;C.handle.active=!1,C.animHandle.off(t.EventType.PLAY,e.onAnimationStart,e),C.animHandle.off(t.EventType.FINISHED,e.onAnimationFinished,e)},on:(H={},H[l.PLATFORM_EVENT]=h,H[l.ANIM_STARTED]={actions:function(n,a){C.animPlaying=!0}},H[l.ANIM_FINISHED]={actions:function(n,a){var e=n.component,t=a.value,o=t.s.wrapMode==i.WrapMode.Reverse;if(t.n==S&&e.availableTime<=0)return r(C.animHandle,I,!1),void e.playerComponent.animHandle.play(s.IDLE);t.n!=I||o?C.animPlaying=!1:r(C.animHandle,I,!0)}},H[l.UPDATE]=[{target:m.W4REVIVE,cond:function(n,a){var e=n.component;return!(n.revives_available<=0)&&(e.availableTime<=0&&!C.animPlaying&&(n.revives_available-=1,!0))}},{target:m.OVER,cond:function(n,a){var e=n.component;return n.revives_available<=0&&!C.animPlaying&&e.availableTime<=0}},{actions:function(n,a){if(!C.pauseUpdate&&!C.animPlaying){var e=n.component;(G+=a.value)>=1&&(G=0,e.playerComponent.stateMachine.state.value!=c.TUTORIAL&&(e.availableTime-=1)),e.availableTime<=0&&(C.pauseUpdate=!0,C.animHandle.play(S)),e.playerComponent.onGameUpdate(a.value),e.playerComponent.curSegmentHandler.enemyContainer.children.forEach((function(n){n.getComponent(f).onGameUpdate(a.value)}))}}}],H[l.USER_INPUT]=[{target:m.PAUSED,cond:function(n,a){var e=a.value;if(e.i==p.BUTTON_CLICK&&e.e.d==g)return!0}},d],H[l.SEGMENT_END]=_,H[l.SEGMENT_START]=T,H[l.AMMO_COUNT_CHANGED]=E,H[l.ENEMY_HIT]=A,H[l.PLAYER_HIT]={actions:function(n,a){var e=n.component,t=u.RELOAD_FAILED_PENALITY;null!=a.value&&(t=u.PLAYER_HIT_PENALITY),e.availableTime-=t,e.ShowShotFeedback("[-"+t+"s]",v.RED),o(C.impactFX).set({active:!0}).delay(.25).set({active:!1}).start()}},H)});a._RF.pop()}}}));

System.register("chunks:///_virtual/GameWaitingRevive.ts",["cc","./GameCommon.ts","./AnimationNames.ts","./ButtonNames.ts","./PokiPlatform.ts"],(function(e){"use strict";var n,a,t,o,i,s,r,c,m,u,v;return{setters:[function(e){n=e.cclegacy,a=e.AnimationClip},function(e){t=e.GameState,o=e.GameEventType,i=e.QGGameInput,s=e.GameConfig,r=e.PlayerAnimations},function(e){c=e.MESSAGEBOX_ANIMATE_IN},function(e){m=e.MESSAGEBOX_BTN1_DATA,u=e.MESSAGEBOX_BTN2_DATA},function(e){v=e.CCPokiSDK}],execute:function(){var N;n._RF.push({},"a8c30BfAhxAmqTNOfwgyYVu","GameWaitingRevive",void 0);var p=t.OVER;e("GameWaitingRevive",{entry:function(e,n){var a=e.component;a.messageBox.message="Watch video to continue?",a.messageBox.buttons=["Watch","No"],a.messageBox.iconDisplay.node.active=!0,a.showMessageBox(),a.playerComponent.animHandle.pause()},exit:function(e,n){e.prev_state=t.W4REVIVE},on:(N={},N[o.PLATFORM_EVENT]={actions:function(e,n){var a=n.value;a.e==v.EVENT_REWARD_BREAK_DONE&&(p=1==a.d?t.RUNNING:t.OVER,e.component.hideMessageBox())}},N[o.USER_INPUT]={actions:function(e,n){var a=e.component,o=n.value;o.i==i.BUTTON_CLICK&&(o.e.d==m?(p=t.RUNNING,v.rewardBreak(),a.messageBox.cancelTimer()):o.e.d==u&&(p=t.OVER,a.hideMessageBox(),a.messageBox.cancelTimer()))}},N[o.ANIM_FINISHED]=[{target:t.OVER,cond:function(e,n){var o=n.value,i=o.s.wrapMode==a.WrapMode.Reverse;e.component;return!(!i||o.n!=c||p!=t.OVER)}},{target:t.RUNNING,cond:function(e,n){var o=n.value,i=o.s.wrapMode==a.WrapMode.Reverse,m=e.component;if(i&&o.n==c&&p==t.RUNNING)return m.availableTime=s.TIME_ON_REVIVE,m.playerComponent.animHandle.play(r.RUN),!0;return!1}},{actions:function(e,n){var t=n.value,o=t.s.wrapMode==a.WrapMode.Reverse,i=e.component;t.n!=c||o||(i.messageBox.timeoutOption={time:5,btn_index:1})}}],N)});n._RF.pop()}}}));

System.register("chunks:///_virtual/HumanoidPractice.ts",["cc","./GameCommon.ts","./EnemyHandler.ts"],(function(n){"use strict";var t,e,o,a,i,c,r,d,s,u,l;return{setters:[function(n){t=n.cclegacy,e=n.v3,o=n.Vec3,a=n.randomRange,i=n.randomRangeInt},function(n){c=n.GameEventType,r=n.EnemyState,d=n.GameConfig,s=n.SFX,u=n.BBOX_HEAD},function(n){l=n.EnemyHandler}],execute:function(){var _,A,m,p,I,v;t._RF.push({},"676ecKsrvpNy4WfytRiXAOa","HumanoidPractice",void 0);var N=[{target:r.HURT,cond:function(n,t){var e=n.component,o=t.value;if(e.health>0){o.b==u?e.health=0:e.health-=o.s.gunCfg.damage;var c=[s.IMPACT1,s.IMPACT2,s.IMPACT3,s.IMPACT4][i(0,4)];e.audioHandler.playSFX(c,a(2,2.5))}return n.prev_state=e.stateMachine.state.value,e.health>0}},{target:r.DEAD,cond:function(n,t){var e=n.component;return n.prev_state=e.stateMachine.state.value,e.health<=0}}];function f(n,t){n.lookAt(t)}n("HumanoidIdle",{entry:function(n,t){n.component.resetEnemy(n)},exit:function(n,t){},on:(_={},_[c.ENEMY_SPAWN]={target:r.RUNNING,actions:function(n,t){var o=n.component,a=t.value.s;o.node.setWorldPosition(a.getWorldPosition()),o.wayPoints=a.children.map((function(n){var t=e();return n.getWorldPosition(t),t})),n.reached_destination=!1,n.next_point=0}},_)}),n("HRun",{next_point:0,entry:function(n,t){var o=n.component;n.reached_destination=!1,n.next_point=0,n.v1=e(),n.v2=e(),n.v3=e(),0==o.wayPoints.length||o.wayPoints.length>0&&n.next_point>=o.wayPoints.length-1?(n.reached_destination=!0,o.skAnimHandle.play(l.ANIMATION_PISTOL_IDLE)):(f(o.node,o.wayPoints[n.next_point]),o.skAnimHandle.play(l.ANIMATION_PISTOL_RUN))},exit:function(n,t){},on:(A={},A[c.UPDATE]=[{target:r.ATTACK,cond:function(n,t){return n.reached_destination}},{actions:function(n,t){var e=t.value,a=n.component;n.reached_destination||(a.node.getWorldPosition(n.v1),n.v2.set(a.wayPoints[n.next_point]),o.subtract(n.v3,n.v2,n.v1),n.v3.normalize(),n.v3.multiplyScalar(e*d.PLAYER_RUNNING_SPEED[0]),n.v1.add3f(n.v3.x,n.v3.y,n.v3.z),o.distance(n.v1,n.v2)<1?(n.next_point++,n.next_point==a.wayPoints.length?n.reached_destination=!0:(a.node.setWorldPosition(n.v2),f(a.node,a.wayPoints[n.next_point]))):a.node.setWorldPosition(n.v1))}}],A[c.ENEMY_HIT]=N,A)}),n("HumanoidAttack",{entry:function(n,t){n.elapsed_time=0;var e=n.component;e.skAnimHandle.play(l.ANIMATION_PISTOL_IDLE),e.node.lookAt(e.gameHandler.playerComponent.node.position)},exit:function(n,t){},on:(m={},m[c.UPDATE]={actions:function(n,t){if(n.elapsed_time<4)n.elapsed_time+=t.value;else{n.elapsed_time=0;var e=n.component;e.skAnimHandle.play(l.ANIMATION_PISTOL_SHOOTING),e.audioHandler.playSFX(s.SHOOT,a(.8,1.2));var o={s:e};e.gameHandler.onPlayerHit(o)}}},m[c.ANIM_FINISHED]={actions:function(n,t){n.component.skAnimHandle.play(l.ANIMATION_PISTOL_IDLE)}},m[c.ENEMY_HIT]=N,m)}),n("HumanoidHide",{entry:function(n,t){},exit:function(n,t){},on:(p={},p[c.UPDATE]={actions:function(n,t){}},p)}),n("HumanoidHurt",{entry:function(n,t){n.component.skAnimHandle.play(l.ANIMATION_HIT_REACTION)},exit:function(n,t){},on:(I={},I[c.UPDATE]={actions:function(n,t){}},I[c.ANIM_FINISHED]=[{target:r.RUNNING,cond:function(n,t){return n.prev_state==r.RUNNING}},{target:r.ATTACK,cond:function(n,t){return n.prev_state==r.ATTACK}}],I)}),n("HumanoidDead",{entry:function(n,t){var e=n.component,o=[l.ANIMATION_DEATH_1,l.ANIMATION_DEATH_2];e.skAnimHandle.play(o[i(0,o.length)])},exit:function(n,t){},on:(v={},v[c.UPDATE]={actions:function(n,t){}},v[c.ANIM_FINISHED]={target:r.IDLE,actions:function(n,t){n.component.gameHandler.humanoid_target_pool.put(n.node)}},v)});t._RF.pop()}}}));

System.register("chunks:///_virtual/Inventory.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,s,a;return{setters:[function(t){e=t.createClass},function(t){s=t.cclegacy,a=t.sys}],execute:function(){s._RF.push({},"ce446HihrxHkZB5b4hwrBVE","Inventory",void 0);var i=t("Inventory",function(){function t(){this.data=void 0,this.data=JSON.parse(a.localStorage.getItem(t.FILE_NAME));var e=window.location.href.indexOf("localhost")>-1;null==this.data&&(this.data={showTutorial:!0,coins:0,top_stats:{accuracy:0,headshots:0,headshot_combo_max:0},selection:{gun:0,upgrades:{reload:0,speed:0,clip_size:0},colors:{base:[87,87,87],barrel:[54,54,54],highlights:[199,199,199],handle:[194,194,194]}}},e&&(this.data.coins=1e4),this.save()),null==this.data.selection.upgrades.clip_size&&(this.data.selection.upgrades.clip_size=0),null==this.data.showTutorial&&(this.data.showTutorial=!0)}return t.prototype.save=function(){a.localStorage.setItem(t.FILE_NAME,JSON.stringify(this.data))},e(t,null,[{key:"instance",get:function(){return null==this._instance&&(this._instance=new t),this._instance}}]),t}());i._instance=void 0,i.FILE_NAME="inventory",s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./DemoScript.ts","./BezierTest.ts","./BoxCullingScript.ts","./CustomizationTry1.ts","./EasyController.ts","./UI_Joystick.ts","./NotifyEvents.ts","./AudioHandler.ts","./DoorHandler.ts","./GameCommon.ts","./Inventory.ts","./OrientationDetector.ts","./OrientationInstructor.ts","./SegmentHandler.ts","./TriggerHandler.ts","./TriggerObserver.ts","./PassUtils.ts","./RenderOptimizer.ts","./TestRenderer.ts","./EnemyHandler.ts","./HumanoidPractice.ts","./TargetPractice.ts","./AnimationNames.ts","./ButtonNames.ts","./GameCustomize.ts","./GameHandler.ts","./GameMenu.ts","./GameOver.ts","./GamePaused.ts","./GameRunning.ts","./GameWaitingRevive.ts","./OnAmmoChanged.ts","./OnButtonClicked.ts","./OnEnemyHit.ts","./OnPlatformEvent.ts","./OnSegmentEvent.ts","./OnUserInput2.ts","./EmissionChange.ts","./PlayerAttack.ts","./PlayerHandler.ts","./PlayerIdle.ts","./PlayerReload.ts","./PlayerRunning.ts","./PlayerStand.ts","./PlayerTutorial.ts","./OnTriggerEntered.ts","./OnUserInput.ts","./PokiPlatform.ts","./ActiveReload.ts","./ColorPicker.ts","./ColorPickerWidget.ts","./MessageBox.ts","./RoundScoreItem.ts","./UpgradableStat.ts","./VSPicker.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MessageBox.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,r,o,s,a,l,c,u,g,m,h,p,b,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.Label,c=t.Node,u=t.Sprite,g=t.Tween,m=t.log,h=t.Button,p=t.tween,b=t.v3,f=t.Component}],execute:function(){var y,v,d,_,P,x,C,T,w,B,D;s._RF.push({},"54e95fOGKRI35FU/MahAb9D","MessageBox",void 0);var z=a.ccclass,L=a.property;t("MessageBox",(y=z("MessageBox"),v=L(l),d=L(c),_=L(c),P=L(u),y((T=e((C=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(e,"messageLabel",T,r(e)),n(e,"buttonContainer",w,r(e)),n(e,"timerProgress",B,r(e)),n(e,"iconDisplay",D,r(e)),e._message="",e._btnText=[],e._timeoutOption={time:0,btn_index:0},e}return i(e,t),e.prototype.cancelTimer=function(){g.stopAllByTarget(this.timerProgress),this.timerProgress.active=!1},o(e,[{key:"message",get:function(){return this._message},set:function(t){this.messageLabel.string=t,this._message=t,this.timerProgress.active=!1,this.iconDisplay.node.active=!1}},{key:"buttons",get:function(){return this._btnText},set:function(t){t.length>this.buttonContainer.children.length?m("too many buttons"):(this._btnText=t,this.buttonContainer.children.forEach((function(e,i){i>t.length-1?e.active=!1:(e.active=!0,e.getComponentInChildren(l).string=t[i])})))}},{key:"timeoutOption",set:function(t){var e=this;if(this._timeoutOption=t,this._timeoutOption.time>0&&t.btn_index<this._btnText.length){var i=this.buttonContainer.children[t.btn_index],n=i.getComponent(h);this.timerProgress;p(this.timerProgress).delay(.25).call((function(){var t=b();i.getWorldPosition(t),t.x-=150,e.timerProgress.setWorldPosition(t),e.timerProgress.active=!0})).set({scale:b(0,1,1)}).to(t.time,{scale:b(1,1,1)}).call((function(){n.clickEvents[0].emit(["timeout"]),e.timerProgress.active=!1})).start()}else this.timerProgress.active=!1}}]),e}(f)).prototype,"messageLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(C.prototype,"buttonContainer",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(C.prototype,"timerProgress",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(C.prototype,"iconDisplay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=C))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/NotifyEvents.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,i,o,s,c,u;return{setters:[function(t){e=t.inheritsLoose,n=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,c=t.Node,u=t.Component}],execute:function(){var a,p,l,f,y;o._RF.push({},"70891t8GJtMdK5tC81dxytP","NotifyEvents",void 0);var v=s.ccclass,d=s.property;t("NotificationListener",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onEvent=function(t,e){},n}(u)),t("NotifyEvents",(a=v("NotifyEvents"),p=d({type:c}),a((y=n((f=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,r(e,"listeners",y,i(e)),e}e(n,t);var o=n.prototype;return o.onEvent=function(t,e){throw new Error("Method not implemented.")},o.start=function(){},o.update=function(t){},n}(u)).prototype,"listeners",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=f))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/OnAmmoChanged.ts",["cc"],(function(t){"use strict";var e,n,o;return{setters:[function(t){e=t.cclegacy,n=t.Sprite,o=t.Color}],execute:function(){e._RF.push({},"6dc98JHQPJHrKYKa0EftQPD","OnAmmoChanged",void 0);t("Game_OnAmmoChanged",{actions:function(t,e){var c=t.component,r=c.bulletDisplay.children,a=e.value;r.forEach((function(t,e){var c=t.getComponent(n);e<a.v?c.color=o.WHITE:c.color=o.BLACK})),a.v<a.p&&(t.shots_fired+=1,c.updateStatsFromContext(t))}});e._RF.pop()}}}));

System.register("chunks:///_virtual/OnButtonClicked.ts",["cc","./GameCommon.ts","./EnemyHandler.ts","./PokiPlatform.ts"],(function(n){"use strict";var e,t,a,o,r;return{setters:[function(n){e=n.cclegacy},function(n){t=n.GameState,a=n.QGGameInput},function(n){o=n.EnemyHandler},function(n){r=n.CCPokiSDK}],execute:function(){e._RF.push({},"521c9fpxbNFZIYsyCnMLC5w","OnButtonClicked",void 0);n("OnCustomizeClicked",{}),n("OnPlayClicked",{target:t.RUNNING,cond:function(n,e){var t=e.value;return t.i==a.BUTTON_CLICK&&"play"==t.e.d}}),n("OnRestartButtonClicked",{cond:function(n,e){var o=e.value;return o.i==a.BUTTON_CLICK&&"restart"==o.e.d&&(n.next_state=t.RUNNING,r.commercialBreak(),!0)},actions:function(n,e){}}),n("OnHomeButtonClicked",{cond:function(n,e){var o=e.value;return o.i==a.BUTTON_CLICK&&"home"==o.e.d&&(n.next_state=t.MENU,r.commercialBreak(),!0)}}),n("OnResumeButtonClicked",{target:t.RUNNING,cond:function(n,e){var t=e.value;return t.i==a.BUTTON_CLICK&&"resume"==t.e.d},actions:function(n,e){var t=n.component;t.playerComponent.animHandle.resume(),t.playerComponent.curSegmentHandler.enemyContainer.children.forEach((function(n){var e=n.getComponent(o);e.animHandle?e.animHandle.resume():e.skAnimHandle&&e.skAnimHandle.resume()}))}});e._RF.pop()}}}));

System.register("chunks:///_virtual/OnEnemyHit.ts",["cc","./GameCommon.ts"],(function(e){"use strict";var a,t,o,n,s,m,c,i;return{setters:[function(e){a=e.cclegacy,t=e.randomRangeInt,o=e.tween},function(e){n=e.BBOX_HEAD,s=e.GameEventType,m=e.GameConfig,c=e.GameColors,i=e.SFX}],execute:function(){a._RF.push({},"37148SCCeFI+7/U0AbOx/0J","OnEnemyHit",void 0);e("Game_OnEnemyHit",{actions:function(e,a){var h=e.component,l=a.value.d;if(e.shots_hit+=1,a.value.b==n?e.headshot_combo+=1:e.headshot_combo=0,e.headshot_combo_max<e.headshot_combo&&(e.headshot_combo_max=e.headshot_combo),l.health<1)if(h.playerComponent.stateMachine.send({type:s.ENEMY_KILLED,event:a}),a.value.b==n){e.headshots+=1;var r=t(0,2);o(h.node).delay(.5).call((function(){var e=[i.HEADSHOT,i.CRACKSHOT][r];h.playerComponent.audioHandler.playSFX(e)})).start();var E=m.TIMEGAINS_HEADHOST[0];h.availableTime<10&&(E=2*m.TIMEGAINS_HEADHOST[0]),h.availableTime+=E;var S=["HEADSHOT","CRACKSHOT"][r]+" [+"+E+"s]";h.ShowShotFeedback(S,c.YELLOW),h.updateStatsFromContext(e)}else h.availableTime+=m.TIMEGAINS_KILL[0],h.ShowShotFeedback("[+"+m.TIMEGAINS_KILL[0]+"s]",c.GREEN)}});a._RF.pop()}}}));

System.register("chunks:///_virtual/OnPlatformEvent.ts",["cc","./GameCommon.ts","./PokiPlatform.ts","./Inventory.ts"],(function(n){"use strict";var t,e,o,r,i;return{setters:[function(n){t=n.cclegacy},function(n){e=n.GameState,o=n.GameConfig},function(n){r=n.CCPokiSDK},function(n){i=n.Inventory}],execute:function(){t._RF.push({},"4098buSPrZM17ZLkfL6XYVp","OnPlatformEvent",void 0);n("Game_OnPlatformEvent",[{target:[e.PAUSED],cond:function(n,t){var e=t.value;n.component;return e.e==r.EVENT_COMMERCIAL_BREAK_START}},{actions:function(n,t){var e=t.value,c=n.component;e.e==r.EVENT_REWARD_BREAK_DONE&&1==e.d&&(c.user_inventory.coins+=o.CUSTOMIZATION_COST,c.coinDisplay.valueLabel.string=c.user_inventory.coins.toString(),i.instance.save())}}]);t._RF.pop()}}}));

System.register("chunks:///_virtual/OnSegmentEvent.ts",["cc","./GameCommon.ts","./EnemyHandler.ts"],(function(e){"use strict";var n,t,a,m,r,o;return{setters:[function(e){n=e.cclegacy,t=e.log,a=e.randomRangeInt,m=e.v4},function(e){r=e.EnemyState},function(e){o=e.EnemyHandler}],execute:function(){n._RF.push({},"95fedaPHxpKUIgSwVYU9lhg","OnSegmentEvent",void 0);e("Game_OnSegmentStart",{actions:function(e,n){e.start_time=Date.now();var a=n.value.s.segmentHandler;t("Game_OnSegmentStart:",a.node.name)}}),e("Game_OnSegmentEnd",{actions:function(e,n){var i=e.component,s=(i.playerComponent,n.value.s.segmentHandler);t("+Game_OnSegmentEnd(",s.node.name,"): "+s.enemyContainer.children.length);s.enemyContainer.children.filter((function(e){var n=e.getComponent(o);return e.active&&n.stateMachine.state.value==r.IDLE}));if(s.clearEnemies(i),e.segments_covered+=1,e.segments_covered%3==0){var c=[.8,.85,.86,.92,.956,.965],g=c[a(0,c.length)];i.environmentMaterial.setProperty("tilingOffset",m(1,1,g,0))}t("-Game_OnSegmentEnd(",s.node.name,"): "+s.enemyContainer.children.length," ",i.humanoid_target_pool.size()," ",i.dummy_target_pool.size())}});n._RF.pop()}}}));

System.register("chunks:///_virtual/OnTriggerEntered.ts",["cc","./GameCommon.ts","./TriggerHandler.ts"],(function(e){"use strict";var n,t,r,a,o;return{setters:[function(e){n=e.cclegacy,t=e.log,r=e.randomRangeInt},function(e){a=e.PlayerState},function(e){o=e.TriggerType}],execute:function(){n._RF.push({},"70510aBkbpN9otOHZKZKM9R","OnTriggerEntered",void 0);e("OnShootingGallaryEntered",{target:a.STAND,cond:function(e,n){return n.value.t.triggerType==o.SHOOTING_GALLERY&&(t(n),!0)}}),e("OnSpawnTargetPracticeEntered",{actions:function(e,n){var t=n.value.t;if(t.triggerType==o.SPAWN_TARGET_PRACTICE){var a,g=e.component,i=g.curSegmentHandler,c=r(i.spawnPonts.length/4,i.spawnPonts.length/2);try{var s=t.node.name.split("_");s[1];c=parseInt(s[3])}catch(e){}i.spawnEnemies(g.gameHandler.dummy_target_pool,c,null!=(a=t.points)?a:null)}}});n._RF.pop()}}}));

System.register("chunks:///_virtual/OnUserInput.ts",["cc","./GameCommon.ts"],(function(e){"use strict";var t,n,a,o,r,u;return{setters:[function(e){t=e.cclegacy,n=e.EventMouse},function(e){a=e.PlayerState,o=e.GameEventType,r=e.QGGameInput,u=e.RELOAD_BUTTON_DATA}],execute:function(){t._RF.push({},"300e2QYGPZA87V1flqssszr","OnUserInput",void 0);e("OnUserInput",[{target:[a.ATTACK],cond:function(e,t){var a=t.value.e;try{if(a.getButton()==n.BUTTON_LEFT&&e.ammo>0){var r={v:e.ammo-1,p:e.ammo};return e.ammo-=1,e.component.gameHandler.stateMachine.send({type:o.AMMO_COUNT_CHANGED,value:r}),e.prev_state=e.component.stateMachine.state.value,!0}}catch(e){}return!1}},{target:[a.RELOAD],cond:function(e,t){e.prev_state=e.component.stateMachine.state.value;var a=e.component,o=t.value;return e.ammo<=0||o.i==r.BUTTON_CLICK&&o.e.d==u||o.i==r.KEY_DOWN&&o.e.d==u||o.e.getButton()==n.BUTTON_RIGHT&&e.ammo<a.gunCfg.clipSize}}]);t._RF.pop()}}}));

System.register("chunks:///_virtual/OnUserInput2.ts",["cc","./GameCommon.ts","./GameRunning.ts"],(function(e){"use strict";var n,t,a,s;return{setters:[function(e){n=e.cclegacy},function(e){t=e.QGGameInput,a=e.GameEventType},function(e){s=e.GameRunning}],execute:function(){n._RF.push({},"ba883ZBfOxCIIzU61580kul","OnUserInput",void 0);e("Game_OnUserInput",{actions:function(e,n){if(!s.pauseUpdate){var u=e.component.playerComponent,c=n.value;switch(c.i){case t.MOUSE_BUTTON_DOWN:u.onMouseDown(c.e);break;case t.MOUSE_MOVE:u.onMouseMove(c.e);break;case t.BUTTON_CLICK:u.stateMachine.send({type:a.USER_INPUT,value:c})}}}});n._RF.pop()}}}));

System.register("chunks:///_virtual/OrientationDetector.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,i,r,a,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.NodeEventType,r=t.UITransform,a=t.log,c=t.Component}],execute:function(){var s;t("ScreenOrientation",void 0),n._RF.push({},"5b058kxiOdGaKyXNmJtvh/d","OrientationDetector",void 0);var u,h=o.ccclass;o.property;!function(t){t.LANDSCAPE="landscape",t.PORTRAIT="portrait"}(u||(u=t("ScreenOrientation",{})));t("OrientationDetector",h("OrientationDetector")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){this.node.on(i.SIZE_CHANGED,this.onSizeChanged,this),this.onSizeChanged()},o.onSizeChanged=function(){var t=this.node.getComponent(r);t.width>t.height?(a("Landscape"),this.node.emit(u.LANDSCAPE)):(a("Portrait"),this.node.emit(u.PORTRAIT))},o.update=function(t){},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/OrientationInstructor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OrientationDetector.ts"],(function(t){"use strict";var n,r,e,i,o,c,s,a,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,s=t.Node,a=t.Component},function(t){u=t.ScreenOrientation}],execute:function(){var p,h,l,f,d;o._RF.push({},"9c5edRU4BtCzZ+/xBs+SoRV","OrientationInstructor",void 0);var y=c.ccclass,I=c.property;t("OrientationInstructor",(p=y("OrientationInstructor"),h=I({type:s}),p((d=n((f=function(t){function n(){for(var n,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return n=t.call.apply(t,[this].concat(o))||this,e(n,"InstructionScreen",d,i(n)),n}r(n,t);var o=n.prototype;return o.start=function(){this.node.on(u.PORTRAIT,this.onPortrait,this),this.node.on(u.LANDSCAPE,this.onLandscape,this)},o.onPortrait=function(){this.InstructionScreen.active=!0},o.onLandscape=function(){this.InstructionScreen.active=!1},o.onDestroy=function(){this.node.off(u.LANDSCAPE,this.onLandscape,this),this.node.off(u.PORTRAIT,this.onPortrait,this)},n}(a)).prototype,"InstructionScreen",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=f))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/PassUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var a,t,r,i,n,o,d,s,l,R,E;return{setters:[function(e){a=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,r=e.gfx,i=e.renderer,n=e.pipeline,o=e.rendering,d=e.geometry,s=e.Vec4,l=e.toRadian,R=e.Material,E=e.macro}],execute:function(){e({AntiAliasing:void 0,buildBloomPasses:function(e,a,t,r,i,n){void 0===r&&(r=.1);void 0===i&&(i=2);void 0===n&&(n=.8);k||(k=new Y);k.threshold=r,k.iterations=i,k.intensity=n;var o=F(e),d="Camera"+o,l=e.window.width,R=e.window.height,E=H(e,l,R);l=E.width,R=E.height;var T=new w(0,0,0,1);e.clearFlag&c.COLOR&&(T.x=e.clearColor.x,T.y=e.clearColor.y,T.z=e.clearColor.z);T.w=e.clearColor.w;var m="dsBloomPassPrefilterColor"+d,S="dsBloomPassPrefilterDS"+d;l>>=1,R>>=1,a.containsResource(m)||(a.addRenderTarget(m,h.RGBA8,l,R,I.MANAGED),a.addDepthStencil(S,h.DEPTH_STENCIL,l,R,I.MANAGED));a.updateRenderTarget(m,l,R),a.updateDepthStencil(S,l,R);var A=a.addRasterPass(l,R,"bloom-prefilter");if(A.name="CameraBloomPrefilterPass"+o,A.setViewport(new C(E.x,E.y,l,R)),a.containsResource(t)){var N=new v;N.name="outputResultMap",A.addComputeView(t,N)}var g=new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,T);A.addRasterView(m,g),k.bloomMaterial.setProperty("texSize",new s(0,0,k.threshold,0),0),A.addQueue(O.RENDER_TRANSPARENT).addCameraQuad(e,k.bloomMaterial,0,x.NONE);for(var D=0;D<k.iterations;++D){var f=new s(l,R,0,0),L="dsBloomPassDownSampleColor"+d+D,b="dsBloomPassDownSampleDS"+d+D;l>>=1,R>>=1,a.containsResource(L)||(a.addRenderTarget(L,h.RGBA8,l,R,I.MANAGED),a.addDepthStencil(b,h.DEPTH_STENCIL,l,R,I.MANAGED)),a.updateRenderTarget(L,l,R),a.updateDepthStencil(b,l,R);var G=a.addRasterPass(l,R,"bloom-downsample"+D);G.name="CameraBloomDownSamplePass"+o+D,G.setViewport(new C(E.x,E.y,l,R));var y=new v;y.name="bloomTexture",0===D?G.addComputeView(m,y):G.addComputeView("dsBloomPassDownSampleColor"+d+(D-1),y);var V=new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,T);G.addRasterView(L,V),k.bloomMaterial.setProperty("texSize",f,J+D),G.addQueue(O.RENDER_TRANSPARENT).addCameraQuad(e,k.bloomMaterial,J+D,x.NONE)}for(var B=0;B<k.iterations;++B){var Q=new s(l,R,0,0),U="dsBloomPassUpSampleColor"+d+(k.iterations-1-B),W="dsBloomPassUpSampleDS"+d+(k.iterations-1-B);l<<=1,R<<=1,a.containsResource(U)||(a.addRenderTarget(U,h.RGBA8,l,R,I.MANAGED),a.addDepthStencil(W,h.DEPTH_STENCIL,l,R,I.MANAGED)),a.updateRenderTarget(U,l,R),a.updateDepthStencil(W,l,R);var z=a.addRasterPass(l,R,"bloom-upsample"+B);z.name="CameraBloomUpSamplePass"+o+(k.iterations-1-B),z.setViewport(new C(E.x,E.y,l,R));var K=new v;K.name="bloomTexture",0===B?z.addComputeView("dsBloomPassDownSampleColor"+d+(k.iterations-1),K):z.addComputeView("dsBloomPassUpSampleColor"+d+(k.iterations-B),K);var q=new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,T);z.addRasterView(U,q),k.bloomMaterial.setProperty("texSize",Q,X+B),z.addQueue(O.RENDER_TRANSPARENT).addCameraQuad(e,k.bloomMaterial,X+B,x.NONE)}var Z="dsBloomPassCombineColor"+d,$="dsBloomPassCombineDS"+d;l=E.width,R=E.height,a.containsResource(Z)||(a.addRenderTarget(Z,h.RGBA8,l,R,I.MANAGED),a.addDepthStencil($,h.DEPTH_STENCIL,l,R,I.MANAGED));a.updateRenderTarget(Z,l,R),a.updateDepthStencil($,l,R);var ee=a.addRasterPass(l,R,"bloom-combine");ee.name="CameraBloomCombinePass"+o,ee.setViewport(new C(E.x,E.y,l,R));var ae=new v;ae.name="outputResultMap",ee.addComputeView(t,ae);var te=new v;te.name="bloomTexture",ee.addComputeView("dsBloomPassUpSampleColor"+d+0,te);var re=new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,T);return ee.addRasterView(Z,re),k.bloomMaterial.setProperty("texSize",new s(0,0,0,k.intensity),j),ee.addQueue(O.RENDER_TRANSPARENT).addCameraQuad(e,k.bloomMaterial,j,x.NONE),{rtName:Z,dsName:$}},buildForwardPass:function(e,t,r){var i=F(e),n="Camera"+i,o=ae(n,e,t),d=H(e,e.window.width,e.window.height),s=d.width,l=d.height,R="dsForwardPassColor"+n,E="dsForwardPassDS"+n;t.containsResource(R)||(r?t.addRenderTarget(R,h.RGBA16F,s,l,I.MANAGED):t.addRenderTexture(R,h.BGRA8,s,l,e.window),t.addDepthStencil(E,h.DEPTH_STENCIL,s,l,I.MANAGED));r?(t.updateRenderTarget(R,s,l),t.updateDepthStencil(E,s,l)):(t.updateRenderWindow(R,e.window),t.updateDepthStencil(E,s,l));var c=t.addRasterPass(s,l,"default");c.name="CameraForwardPass"+i,c.setViewport(new C(d.x,d.y,s,l));for(var T,m=a(o.mainLightShadowNames);!(T=m()).done;){var S=T.value;if(t.containsResource(S)){var A=new v("cc_shadowMap");c.addComputeView(S,A)}}for(var N,g=a(o.spotLightShadowNames);!(N=g()).done;){var D=N.value;if(t.containsResource(D)){var f=new v("cc_spotShadowMap");c.addComputeView(D,f)}}var b=new M("_",P.WRITE,_.RENDER_TARGET,r?u.CLEAR:B(e.clearFlag,_.RENDER_TARGET),p.STORE,e.clearFlag,new w(e.clearColor.x,e.clearColor.y,e.clearColor.z,e.clearColor.w)),G=new M("_",P.WRITE,_.DEPTH_STENCIL,r?u.CLEAR:B(e.clearFlag,_.DEPTH_STENCIL),p.STORE,e.clearFlag,new w(e.clearDepth,e.clearStencil,0,0));c.addRasterView(R,b),c.addRasterView(E,G),c.addQueue(O.RENDER_OPAQUE).addSceneOfCamera(e,new L,x.OPAQUE_OBJECT|x.PLANAR_SHADOW|x.CUTOUT_OBJECT|x.DEFAULT_LIGHTING|x.DRAW_INSTANCING);var y=x.TRANSPARENT_OBJECT|x.GEOMETRY;r||(y|=x.UI,c.showStatistics=!0);return c.addQueue(O.RENDER_TRANSPARENT).addSceneOfCamera(e,new L,y),{rtName:R,dsName:E}},buildFxaaPass:function(e,a,t){U||(U=new Q);var r=F(e),i="Camera"+r,n=e.window.width,o=e.window.height,d=H(e,n,o);n=d.width,o=d.height;var l=new w(0,0,0,1);e.clearFlag&c.COLOR&&(l.x=e.clearColor.x,l.y=e.clearColor.y,l.z=e.clearColor.z);l.w=e.clearColor.w;var R="dsFxaaPassColor"+i,E="dsFxaaPassDS"+i;a.containsResource(R)||(a.addRenderTarget(R,h.RGBA8,n,o,I.MANAGED),a.addDepthStencil(E,h.DEPTH_STENCIL,n,o,I.MANAGED));a.updateRenderTarget(R,n,o),a.updateDepthStencil(E,n,o);var T=a.addRasterPass(n,o,"fxaa");if(T.name="CameraFxaaPass"+r,T.setViewport(new C(d.x,d.y,n,o)),a.containsResource(t)){var m=new v;m.name="sceneColorMap",T.addComputeView(t,m)}var S=new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,l);return T.addRasterView(R,S),U.fxaaMaterial.setProperty("texSize",new s(n,o,1/n,1/o),0),T.addQueue(O.RENDER_TRANSPARENT).addCameraQuad(e,U.fxaaMaterial,0,x.NONE),{rtName:R,dsName:E}},buildGBufferPass:function(e,a){var t=F(e),r=H(e,e.window.width,e.window.height),i=r.width,n=r.height,o="gBufferPassColorCamera",d="gBufferPassNormal",s="gBufferPassEmissive",l="gBufferPassDSCamera";if(!a.containsResource(o)){var R=h.RGBA16F;a.addRenderTarget(o,R,i,n,I.MANAGED),a.addRenderTarget(d,R,i,n,I.MANAGED),a.addRenderTarget(s,R,i,n,I.MANAGED),a.addDepthStencil(l,h.DEPTH_STENCIL,i,n,I.MANAGED)}a.updateRenderTarget(o,i,n),a.updateRenderTarget(d,i,n),a.updateRenderTarget(s,i,n),a.updateDepthStencil(l,i,n);var E=a.addRasterPass(i,n,"default");E.name="CameraGBufferPass"+t,E.setViewport(new C(r.x,r.y,r.width,r.height));var T=new w(0,0,0,0);e.clearFlag&c.COLOR&&(a.pipelineSceneData.isHDR?(m=T,S=e.clearColor,m.x=S.x*S.x,m.y=S.y*S.y,m.z=S.z*S.z):(T.x=e.clearColor.x,T.y=e.clearColor.y,T.z=e.clearColor.z));var m,S;var A=new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,T),N=new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,new w(0,0,0,0)),g=new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,new w(0,0,0,0)),D=new M("_",P.WRITE,_.DEPTH_STENCIL,u.CLEAR,p.STORE,e.clearFlag,new w(e.clearDepth,e.clearStencil,0,0));E.addRasterView(o,A),E.addRasterView(d,N),E.addRasterView(s,g),E.addRasterView(l,D),E.addQueue(O.RENDER_OPAQUE).addSceneOfCamera(e,new L,x.OPAQUE_OBJECT|x.CUTOUT_OBJECT);var f=new te;return f.color=o,f.normal=d,f.emissive=s,f.ds=l,f},buildLightingPass:function(e,t,r){ie||(ie=new re);var i=F(e),n=ae("Camera"+i,e,t),o=H(e,e.window.width,e.window.height),d=o.width,s=o.height,l="deferredLightingPassRTName",R="deferredLightingPassDS";t.containsResource(l)||(t.addRenderTarget(l,h.RGBA8,d,s,I.MANAGED),t.addDepthStencil(R,h.DEPTH_STENCIL,d,s,I.MANAGED));t.updateRenderTarget(l,d,s),t.updateDepthStencil(R,d,s);var E=t.addRasterPass(d,s,"deferred-lighting");E.name="CameraLightingPass"+i,E.setViewport(new C(o.x,o.y,d,s));for(var T,m=a(n.mainLightShadowNames);!(T=m()).done;){var S=T.value;if(t.containsResource(S)){var A=new v("cc_shadowMap");E.addComputeView(S,A)}}for(var N,g=a(n.spotLightShadowNames);!(N=g()).done;){var D=N.value;if(t.containsResource(D)){var f=new v("cc_spotShadowMap");E.addComputeView(D,f)}}if(t.containsResource(r.color)){var b=new v;b.name="gbuffer_albedoMap",E.addComputeView(r.color,b);var G=new v;G.name="gbuffer_normalMap",E.addComputeView(r.normal,G);var y=new v;y.name="gbuffer_emissiveMap",E.addComputeView(r.emissive,y);var V=new v;V.name="depth_stencil",E.addComputeView(r.ds,V)}var B=new w(0,0,0,0);e.clearFlag&c.COLOR&&(B.x=e.clearColor.x,B.y=e.clearColor.y,B.z=e.clearColor.z);B.w=0;var Q=new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,B);return E.addRasterView(l,Q),E.addQueue(O.RENDER_TRANSPARENT).addCameraQuad(e,ie.deferredLightingMaterial,0,x.VOLUMETRIC_LIGHTING),E.addQueue(O.RENDER_TRANSPARENT).addSceneOfCamera(e,new L,x.TRANSPARENT_OBJECT|x.PLANAR_SHADOW|x.GEOMETRY),{rtName:l,dsName:R}},buildNativeDeferredPipeline:function(e,a){F(e);var t=H(e,e.window.width,e.window.height),r=t.width,i=t.height;a.containsResource("Albedo")||(a.addRenderTarget("Albedo",h.RGBA16F,r,i,I.MANAGED),a.addRenderTarget("Normal",h.RGBA16F,r,i,I.MANAGED),a.addRenderTarget("Emissive",h.RGBA16F,r,i,I.MANAGED),a.addDepthStencil("DepthStencil",h.DEPTH_STENCIL,r,i,I.MANAGED),a.addRenderTexture("Color",h.BGRA8,r,i,e.window));ie||(ie=new re);var n=a.addRasterPass(r,i,"default");n.name="GeometryPass",n.setViewport(new C(t.x,t.y,t.width,t.height)),n.addRasterView("Albedo",new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,c.COLOR)),n.addRasterView("Normal",new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,c.COLOR)),n.addRasterView("Emissive",new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,c.COLOR)),n.addRasterView("DepthStencil",new M("_",P.WRITE,_.DEPTH_STENCIL,u.CLEAR,p.STORE,c.DEPTH_STENCIL,new w(1,0,0,0))),n.addQueue(O.RENDER_OPAQUE).addSceneOfCamera(e,new L,x.OPAQUE_OBJECT|x.CUTOUT_OBJECT);var o=a.addRasterPass(r,i,"default");o.name="LightingPass",o.setViewport(new C(t.x,t.y,r,i));var d=new w(0,0,0,0);e.clearFlag&c.COLOR&&(d.x=e.clearColor.x,d.y=e.clearColor.y,d.z=e.clearColor.z);d.w=1,o.addRasterView("Color",new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,e.clearFlag,d)),o.addComputeView("Albedo",new v("gbuffer_albedoMap")),o.addComputeView("Normal",new v("gbuffer_normalMap")),o.addComputeView("Emissive",new v("gbuffer_emissiveMap")),o.addComputeView("DepthStencil",new v("depth_stencil")),o.addQueue(O.RENDER_TRANSPARENT).addCameraQuad(e,ie.deferredLightingMaterial,0,x.VOLUMETRIC_LIGHTING),o.addQueue(O.RENDER_TRANSPARENT).addSceneOfCamera(e,new L,x.TRANSPARENT_OBJECT|x.PLANAR_SHADOW|x.GEOMETRY)},buildNativeForwardPass:function(e,a){var t=F(e),r="Camera"+t,i=H(e,e.window.width,e.window.height),n=i.width,o=i.height,d="dsForwardPassColor"+r,s="dsForwardPassDS"+r;a.containsResource(d)||(a.addRenderTexture(d,h.BGRA8,n,o,e.window),a.addDepthStencil(s,h.DEPTH_STENCIL,n,o,I.MANAGED));a.updateRenderWindow(d,e.window),a.updateDepthStencil(s,n,o);var l=a.addRasterPass(n,o,"default");l.name="CameraForwardPass"+t,l.setViewport(new C(i.x,i.y,n,o));var R=B(e.clearFlag,_.RENDER_TARGET),E=B(e.clearFlag,_.DEPTH_STENCIL);l.addRasterView(d,new M("_",P.WRITE,_.RENDER_TARGET,R,p.STORE,ne(_.RENDER_TARGET,e.clearFlag,R),new w(e.clearColor.x,e.clearColor.y,e.clearColor.z,e.clearColor.w))),l.addRasterView(s,new M("_",P.WRITE,_.DEPTH_STENCIL,E,p.STORE,ne(_.DEPTH_STENCIL,e.clearFlag,E),new w(e.clearDepth,e.clearStencil,0,0))),l.addQueue(O.RENDER_OPAQUE).addSceneOfCamera(e,new L,x.OPAQUE_OBJECT|x.PLANAR_SHADOW|x.CUTOUT_OBJECT|x.DEFAULT_LIGHTING|x.DRAW_INSTANCING),l.addQueue(O.RENDER_TRANSPARENT).addSceneOfCamera(e,new L,x.TRANSPARENT_OBJECT|x.GEOMETRY),l.addQueue(O.RENDER_TRANSPARENT).addSceneOfCamera(e,new L,x.UI),l.showStatistics=!0},buildPostprocessPass:function(e,a,t,r){void 0===r&&(r=b.NONE);(!q||q&&q.antiAliasing!==r)&&(q=new K(r));var i=F(e),n=H(e,e.window.width,e.window.height),o=n.width,d=n.height,s="postprocessPassRTName"+i,l="postprocessPassDS"+i;a.containsResource(s)||(a.addRenderTexture(s,h.BGRA8,o,d,e.window),a.addDepthStencil(l,h.DEPTH_STENCIL,o,d,I.MANAGED));a.updateRenderWindow(s,e.window),a.updateDepthStencil(l,o,d);var R=a.addRasterPass(o,d,"post-process");if(R.name="CameraPostprocessPass"+i,R.setViewport(new C(n.x,n.y,n.width,n.height)),a.containsResource(t)){var E=new v;E.name="outputResultMap",R.addComputeView(t,E)}var u=new w(0,0,0,e.clearColor.w);e.clearFlag&c.COLOR&&(u.x=e.clearColor.x,u.y=e.clearColor.y,u.z=e.clearColor.z);var T=new M("_",P.WRITE,_.RENDER_TARGET,B(e.clearFlag,_.RENDER_TARGET),p.STORE,e.clearFlag,u),m=new M("_",P.WRITE,_.DEPTH_STENCIL,B(e.clearFlag,_.DEPTH_STENCIL),p.STORE,e.clearFlag,new w(e.clearDepth,e.clearStencil,0,0));R.addRasterView(s,T),R.addRasterView(l,m),R.addQueue(O.NONE).addFullscreenQuad(q.postMaterial,0,x.NONE),R.addQueue(O.RENDER_TRANSPARENT).addSceneOfCamera(e,new L,x.UI),G===e&&(R.showStatistics=!0);return{rtName:s,dsName:l}},buildReflectionProbePass:$,buildReflectionProbePasss:function(e,a,r){var i=t.internal.reflectionProbeManager.getProbes();if(0===i.length)return;for(var n=0;n<i.length;n++){var o=i[n];if(o.needRender){for(var d=0;d<o.bakedCubeTextures.length;d++)$(e,a,o,o.bakedCubeTextures[d].window,d);o.needRender=!1}}},buildShadowPass:Z,buildShadowPasses:ae,buildUIPass:function(e,a){var t=F(e),r="Camera"+t,i=H(e,e.window.width,e.window.height),n=i.width,o=i.height,d="dsUIAndProfilerPassColor"+r,s="dsUIAndProfilerPassDS"+r;a.containsResource(d)||(a.addRenderTexture(d,h.BGRA8,n,o,e.window),a.addDepthStencil(s,h.DEPTH_STENCIL,n,o,I.MANAGED));a.updateRenderWindow(d,e.window),a.updateDepthStencil(s,n,o);var l=a.addRasterPass(n,o,"default");l.name="CameraUIAndProfilerPass"+t,l.setViewport(new C(i.x,i.y,n,o));var R=new M("_",P.WRITE,_.RENDER_TARGET,B(e.clearFlag,_.RENDER_TARGET),p.STORE,e.clearFlag,new w(e.clearColor.x,e.clearColor.y,e.clearColor.z,e.clearColor.w)),E=new M("_",P.WRITE,_.DEPTH_STENCIL,B(e.clearFlag,_.DEPTH_STENCIL),p.STORE,e.clearFlag,new w(e.clearDepth,e.clearStencil,0,0));l.addRasterView(d,R),l.addRasterView(s,E);var c=x.UI;l.addQueue(O.RENDER_TRANSPARENT).addSceneOfCamera(e,new L,c),G===e&&(l.showStatistics=!0)},decideProfilerCamera:function(e){for(var a=e.length-1;a>=0;--a){var t=e[a];if(t.window.swapchain)return void(G=t)}G=null},getCameraUniqueID:F,getLoadOpOfClearFlag:B,getRenderArea:H,isUICamera:function(e){for(var a=e.scene.batches,t=0;t<a.length;t++){var r=a[t];if(e.visibility&r.visFlags)return!0}return!1},updateCameraUBO:oe,validPunctualLightsCulling:y}),t._RF.push({},"efc77aCNPpJ1KpKzsRzV5lC","PassUtils",void 0);var c=r.ClearFlagBit,w=r.Color,u=r.LoadOp,h=r.Format,T=r.Rect,p=r.StoreOp,C=r.Viewport,m=i.scene,S=m.Camera,A=m.CSMLevel,N=m.LightType,g=m.ShadowType,D=m.SKYBOX_FLAG,f=n.supportsR32FloatTexture,P=o.AccessType,_=o.AttachmentType,v=o.ComputeView,L=o.LightInfo,O=o.QueueHint,M=o.RasterView,I=o.ResourceResidency,x=o.SceneFlags;var b,G=null;function y(e,a){var t=e.pipelineSceneData.validPunctualLights;t.length=0;for(var r=d.Sphere.create(0,0,0,1),i=a.scene.spotLights,n=0;n<i.length;n++){var o=i[n];o.baked||(d.Sphere.set(r,o.position.x,o.position.y,o.position.z,o.range),d.intersect.sphereFrustum(r,a.frustum)&&t.push(o))}for(var s=a.scene.sphereLights,l=0;l<s.length;l++){var R=s[l];R.baked||(d.Sphere.set(r,R.position.x,R.position.y,R.position.z,R.range),d.intersect.sphereFrustum(r,a.frustum)&&t.push(R))}}!function(e){e[e.NONE=0]="NONE",e[e.FXAA=1]="FXAA",e[e.FXAAHQ=2]="FXAAHQ"}(b||(b=e("AntiAliasing",{})));var V=[];function F(e){return-1===V.indexOf(e)&&V.push(e),V.indexOf(e)}function B(e,a){var t=u.CLEAR;return e&c.COLOR||a!==_.RENDER_TARGET||(t=e&D?u.CLEAR:u.LOAD),(e&c.DEPTH_STENCIL)!==c.DEPTH_STENCIL&&a===_.DEPTH_STENCIL&&(e&c.DEPTH||(t=u.LOAD),e&c.STENCIL||(t=u.LOAD)),t}function H(e,a,r,i,n){void 0===i&&(i=null),void 0===n&&(n=0);var o=new T,d=e?e.viewport:new T(0,0,1,1),s=a,l=r;if(o.x=d.x*s,o.y=d.y*l,o.width=d.width*s,o.height=d.height*l,i)switch(i.type){case N.DIRECTIONAL:var R=i;if(R.shadowFixedArea||R.csmLevel===A.LEVEL_1)o.x=0,o.y=0,o.width=s,o.height=l;else{var E=t.director.root.device.capabilities.screenSpaceSignY;o.x=n%2*.5*s,o.y=E?.5*(1-Math.floor(n/2))*l:.5*Math.floor(n/2)*l,o.width=.5*s,o.height=.5*l}break;case N.SPOT:o.x=0,o.y=0,o.width=s,o.height=l}return o}var Q=function(){var e=a.prototype;function a(){this.fxaaMaterial=void 0,this._init()}return e._updateFxaaPass=function(){if(this.fxaaMaterial){var e=this.fxaaMaterial.passes[0];e.beginChangeStatesSilently(),e.tryCompile(),e.endChangeStatesSilently()}},e._init=function(){if(!this.fxaaMaterial){this.fxaaMaterial=new R,this.fxaaMaterial._uuid="builtin-fxaa-material",this.fxaaMaterial.initialize({effectName:"pipeline/fxaa-hq"});for(var e=0;e<this.fxaaMaterial.passes.length;++e)this.fxaaMaterial.passes[e].tryCompile();this._updateFxaaPass()}},a}(),U=null;var W=e("MAX_BLOOM_FILTER_PASS_NUM",6),z=e("BLOOM_PREFILTERPASS_INDEX",0),J=e("BLOOM_DOWNSAMPLEPASS_INDEX",1),X=e("BLOOM_UPSAMPLEPASS_INDEX",J+W),j=e("BLOOM_COMBINEPASS_INDEX",X+W),Y=function(){var e=a.prototype;function a(){this.bloomMaterial=void 0,this.threshold=.1,this.iterations=2,this.intensity=.8,this._init()}return e._updateBloomPass=function(){if(this.bloomMaterial){var e=this.bloomMaterial.passes[z];e.beginChangeStatesSilently(),e.tryCompile(),e.endChangeStatesSilently();for(var a=0;a<W;++a){var t=this.bloomMaterial.passes[J+a];t.beginChangeStatesSilently(),t.tryCompile(),t.endChangeStatesSilently();var r=this.bloomMaterial.passes[X+a];r.beginChangeStatesSilently(),r.tryCompile(),r.endChangeStatesSilently()}var i=this.bloomMaterial.passes[j];i.beginChangeStatesSilently(),i.tryCompile(),i.endChangeStatesSilently()}},e._init=function(){if(!this.bloomMaterial){this.bloomMaterial=new R,this.bloomMaterial._uuid="builtin-bloom-material",this.bloomMaterial.initialize({effectName:"pipeline/bloom"});for(var e=0;e<this.bloomMaterial.passes.length;++e)this.bloomMaterial.passes[e].tryCompile();this._updateBloomPass()}},a}(),k=null;var K=function(){function e(e){void 0===e&&(e=b.NONE),this.postMaterial=void 0,this.antiAliasing=b.NONE,this.antiAliasing=e,this._init()}return e.prototype._init=function(){this.postMaterial=new R,this.postMaterial.name="builtin-post-process-material",E.ENABLE_ANTIALIAS_FXAA&&(this.antiAliasing=b.FXAA),this.postMaterial.initialize({effectName:"pipeline/post-process",defines:{ANTIALIAS_TYPE:this.antiAliasing}});for(var e=0;e<this.postMaterial.passes.length;++e)this.postMaterial.passes[e].tryCompile()},e}(),q=null;function Z(e,a,t,r,i,n,o){var d=n,s=o,l=H(t,n,o,r,i);n=l.width,o=l.height;var R=a.device,E=e;if(!a.containsResource(E)){var T=f(R)?h.R32F:h.RGBA8;a.addRenderTarget(E,T,d,s,I.MANAGED),a.addDepthStencil(E+"Depth",h.DEPTH_STENCIL,d,s,I.MANAGED)}a.updateRenderTarget(E,d,s),a.updateDepthStencil(E+"Depth",d,s);var m=a.addRasterPass(n,o,"default");m.name=e,m.setViewport(new C(l.x,l.y,l.width,l.height)),m.addRasterView(E,new M("_",P.WRITE,_.RENDER_TARGET,u.CLEAR,p.STORE,c.COLOR,new w(1,1,1,t.clearColor.w))),m.addRasterView(E+"Depth",new M("_",P.WRITE,_.DEPTH_STENCIL,u.CLEAR,p.DISCARD,c.DEPTH_STENCIL,new w(t.clearDepth,t.clearStencil,0,0))),m.addQueue(O.RENDER_OPAQUE).addSceneOfCamera(t,new L(r,i),x.SHADOW_CASTER)}function $(e,a,t,r,i){var n="Camera"+i,o=t.renderArea(),d=o.x,s=o.y,l=t.camera,R="reflectionProbePassColor"+n,E="reflectionProbePassDS"+n;t.updateCameraDir(i),a.containsResource(R)||(a.addRenderTexture(R,h.RGBA8,d,s,r),a.addDepthStencil(E,h.DEPTH_STENCIL,d,s,I.MANAGED)),a.updateRenderWindow(R,r),a.updateDepthStencil(E,d,s);var c=a.addRasterPass(d,s,"default");c.name="ReflectionProbePass"+i,c.setViewport(new C(0,0,d,s));var u=new M("_",P.WRITE,_.RENDER_TARGET,B(l.clearFlag,_.RENDER_TARGET),p.STORE,l.clearFlag,new w(l.clearColor.x,l.clearColor.y,l.clearColor.z,l.clearColor.w)),T=new M("_",P.WRITE,_.DEPTH_STENCIL,B(l.clearFlag,_.DEPTH_STENCIL),p.STORE,l.clearFlag,new w(l.clearDepth,l.clearStencil,0,0));c.addRasterView(R,u),c.addRasterView(E,T);var m=c.addQueue(O.RENDER_OPAQUE);m.addSceneOfCamera(e,new L,x.REFLECTION_PROBE),oe(m,l,a)}var ee=function(){this.shadowEnabled=!1,this.mainLightShadowNames=new Array,this.spotLightShadowNames=new Array};function ae(e,a,t){y(t,a);var r=t,i=r.pipelineSceneData.shadows,n=t.pipelineSceneData.validPunctualLights,o=new ee,d=t.pipelineSceneData.shadows;if(!i.enabled||i.type!==g.ShadowMap)return o;o.shadowEnabled=!0;for(var s=[],l=0,R=0;l<i.maxReceived&&R<n.length;){var E=n[R];if(E.type===N.SPOT)E.shadowEnabled&&(s.push(E),l++);R++}var c=a.scene.mainLight,w=d.size.x,u=d.size.y;if(c&&c.shadowEnabled)if(o.mainLightShadowNames[0]="MainLightShadow"+e,c.shadowFixedArea)Z(o.mainLightShadowNames[0],t,a,c,0,w,u);else for(var h=r.pipelineSceneData.csmSupported?c.csmLevel:1,T=0;T<h;T++)o.mainLightShadowNames[T]="MainLightShadow"+e,Z(o.mainLightShadowNames[T],t,a,c,T,w,u);for(var p=0;p<s.length;p++){var C=s[p],m="SpotLightShadow"+p.toString()+e;o.spotLightShadowNames[p]=m,Z(m,t,a,C,0,w,u)}return o}var te=e("GBufferInfo",(function(){}));var re=function(){function e(){this.deferredLightingMaterial=void 0,this._init()}return e.prototype._init=function(){this.deferredLightingMaterial=new R,this.deferredLightingMaterial.name="builtin-deferred-material",this.deferredLightingMaterial.initialize({effectName:"pipeline/deferred-lighting",defines:{CC_RECEIVE_SHADOW:1}});for(var e=0;e<this.deferredLightingMaterial.passes.length;++e)this.deferredLightingMaterial.passes[e].tryCompile()},e}(),ie=null;function ne(e,a,t){switch(e){case _.DEPTH_STENCIL:return t===u.CLEAR?a&c.DEPTH_STENCIL?a:c.DEPTH_STENCIL:c.NONE;case _.RENDER_TARGET:default:return t===u.CLEAR?c.COLOR:c.NONE}}function oe(e,a,r){var i=t.director.root.pipeline,n=r.pipelineSceneData,o=n.skybox;e.addConstant("CCCamera"),e.setMat4("cc_matView",a.matView),e.setMat4("cc_matViewInv",a.node.worldMatrix),e.setMat4("cc_matProj",a.matProj),e.setMat4("cc_matProjInv",a.matProjInv),e.setMat4("cc_matViewProj",a.matViewProj),e.setMat4("cc_matViewProjInv",a.matViewProjInv),e.setVec4("cc_cameraPos",new s(a.position.x,a.position.y,a.position.z,i.getCombineSignY())),e.setVec4("cc_surfaceTransform",new s(a.surfaceTransform,0,Math.cos(l(o.getRotationAngle())),Math.sin(l(o.getRotationAngle())))),e.setVec4("cc_screenScale",new s(n.shadingScale,n.shadingScale,1/n.shadingScale,1/n.shadingScale)),e.setVec4("cc_exposure",new s(a.exposure,1/a.exposure,n.isHDR?1:0,1/S.standardExposureValue))}t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerAttack.ts",["cc","./GameCommon.ts","./EnemyHandler.ts","./OnUserInput.ts","./OnTriggerEntered.ts","./PlayerStand.ts"],(function(t){"use strict";var e,n,a,r,i,o,c,l,s,u,d,m,p,g,y,E,f,v;return{setters:[function(t){e=t.cclegacy,n=t.v3,a=t.randomRange,r=t.find,i=t.tween,o=t.PhysicsSystem,c=t.ParticleSystem},function(t){l=t.PlayerAnimations,s=t.SFX,u=t.PlayerState,d=t.GameConfig,m=t.EnemyState,p=t.BBOX_HEAD,g=t.GameEventType},function(t){y=t.EnemyHandler},function(t){E=t.OnUserInput},function(t){f=t.OnShootingGallaryEntered},function(t){v=t.PlayerStand}],execute:function(){var P;e._RF.push({},"a2201uJur9IoZzrta72Vc8G","PlayerAttack",void 0);var T=n(),_=t("PlayerAttack",{debriFX:null,entry:function(t,e){var n=t.component;if(n.animHandle.stop(),n.animHandle.play(l.FIRE),n.muzzleVFX.play(),n.audioHandler.playSFX(s.SHOOT,a(.5,.8)),_.debriFX=_.debriFX?_.debriFX:r("Debri"),_.debriFX.active=!1,n.pointLight.active=!0,i(n.pointLight).delay(.1).set({active:!1}).start(),t.prev_state?t.prev_state:u.RUNNING,n.inTrigger||t.inTutorial||(n.speed=d.PLAYER_WALKING_SPEED[n.gameHandler.difficulty]),n.lastCollider){var g=o.instance.raycastClosestResult,E=n.lastCollider,f=!1,v=E.node.parent.getComponent(y);null==v&&(f=!0,v=E.node.parent.parent.getComponent(y));var P=n.gameHandler;if(v){n.hitPoint.setWorldPosition(g.hitPoint),n.hitPoint.getComponent(c).play();var N=v.stateMachine.state.value==m.DEAD||v.health<=0,I={s:n,d:v,b:E.name};if(N)return;P.onEnemyHit(I),E.name==p&&f&&(_.debriFX.active=!0,_.debriFX.setWorldPosition(g.hitPoint),_.debriFX.getComponent(c).play())}}var F=n.mouseLocation;n.playerCamera.screenPointToRay(F.x,F.y).computeHit(T,-50),n.animHandle.node.lookAt(T)},exit:function(t,e){t.prev_state=u.ATTACK},on:(P={},P[g.ANIM_FINISHED]=[{target:u.TUTORIAL,cond:function(t,e){return t.inTutorial}},{target:u.RUNNING,cond:function(t,e){t.component;return!t.component.inTrigger}},{target:u.STAND,cond:function(t,e){t.component;return t.component.inTrigger}}],P[g.USER_INPUT]=E,P[g.TRIGGER_ENTERED]=f,P[g.ENEMY_KILLED]={target:u.RUNNING,cond:function(t,e){return v.target_data.e==g.ENEMY_KILLED&&(v.target_counter+=1,v.target_counter>=v.target_data.c)},actions:function(t,e){t.component.inTrigger=!1}},P)});e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameCommon.ts","./xstate.fsm.mjs_cjs=&original=.js","./PlayerRunning.ts","./PlayerAttack.ts","./SegmentHandler.ts","./AudioHandler.ts","./PlayerIdle.ts","./PlayerReload.ts","./GameHandler.ts","./TriggerObserver.ts","./PlayerStand.ts","./ActiveReload.ts","./PlayerTutorial.ts","./ButtonNames.ts","./xstate.fsm.js"],(function(t){"use strict";var e,i,n,a,s,r,o,l,h,c,u,d,p,m,f,P,y,g,I,v,x,b,C,N,E,T,R,D,H,S,A,M,w,_,L,G,z,U,F,O,W,k,K,V;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,o=t._decorator,l=t.Quat,h=t.v3,c=t.SkeletalAnimation,u=t.Camera,d=t.CCBoolean,p=t.Node,m=t.ParticleSystem,f=t.Vec2,P=t.geometry,y=t.randomRangeInt,g=t.BoxCollider,I=t.find,v=t.Vec3,x=t.KeyCode,b=t.PhysicsSystem,C=t.tween},function(t){N=t.PlayerState,E=t.GameConfig,T=t.SplicedData,R=t.GameEventType,D=t.GameState,H=t.GunConfigs,S=t.QGGameInput,A=t.RELOAD_BUTTON_DATA},null,function(t){M=t.PlayerRunning},function(t){w=t.PlayerAttack},function(t){_=t.SegmentHandler},function(t){L=t.AudioHandler},function(t){G=t.PlayerIdle},function(t){z=t.PlayerReload},function(t){U=t.GameHandler},function(t){F=t.TriggerObserver},function(t){O=t.PlayerStand},function(t){W=t.ActiveReload},function(t){k=t.PlayerTutorial},function(t){K=t.PAUSE_BUTTON_DATA},function(t){V=t.default}],execute:function(){var B,Y,j,X,Q,J,q,Z,$,tt,et,it,nt,at,st,rt,ot,lt,ht,ct,ut,dt,pt,mt,ft,Pt,yt,gt,It,vt;r._RF.push({},"8cf40Loy2RNHrQV41lJ8IHM","PlayerHandler",void 0);var xt=o.ccclass,bt=o.property,Ct=V.createMachine,Nt=V.interpret,Et=new l,Tt=new l,Rt=new l,Dt=h(),Ht=0,St={id:"player",initial:N.IDLE,context:{},states:(B={},B[N.RUNNING]=M,B[N.ATTACK]=w,B[N.IDLE]=G,B[N.RELOAD]=z,B[N.STAND]=O,B[N.TUTORIAL]=k,B)};t("PlayerHandler",(Y=xt("PlayerHandler"),j=bt(c),X=bt({type:u}),Q=bt({type:u}),J=bt({type:u}),q=bt({type:d}),Z=bt({type:p}),$=bt({type:p}),tt=bt({type:p}),et=bt(p),it=bt(m),nt=bt(p),at=bt(W),st=bt({type:p}),Y((lt=e((ot=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"animHandle",lt,a(e)),n(e,"playerCamera",ht,a(e)),n(e,"runCamera",ct,a(e)),n(e,"screenCamera",ut,a(e)),n(e,"dynamicCamera",dt,a(e)),n(e,"crossHair",pt,a(e)),n(e,"pathNode",mt,a(e)),e.spNode=null,n(e,"spNodes",ft,a(e)),n(e,"gunNodes",Pt,a(e)),n(e,"flashVFXList",yt,a(e)),n(e,"pointLight",gt,a(e)),n(e,"activeReloadWidget",It,a(e)),e.gameHandler=null,e.audioHandler=null,e.mouseLocation=new f,e.pathPoints=[],e.curPointIndex=0,e.targetPos=void 0,e.t=0,e.speed=E.PLAYER_RUNNING_SPEED[0],e.shootRay=new P.Ray,e.lastCollider=null,e.spliceData=new T,e.stateMachine=void 0,e.gunCfg=void 0,e.inTrigger=!1,e.curSegmentHandler=null,e.playerCollider=null,e.numSegmentsCovered=0,e.numARTriggered=0,e.difficultyCurve=[0,1,2,4,5,2,0,3,4,5,1,3,0,2,5],e.difficultyIndex=0,n(e,"hitPoint",vt,a(e)),e.muzzleVFX=null,e}i(e,t);var r=e.prototype;return r.splicePath=function(t,e){var i,n=null!=e?e:this.difficultyCurve[this.difficultyIndex];this.difficultyIndex+=y(1,3),this.difficultyIndex%=this.difficultyCurve.length,this.spNode=this.spNodes[n],this.spNodes.forEach((function(t,e){t.active=!1})),this.spNode.active=!0;var a=this.spNode.getComponent(_);this.curSegmentHandler=a;var s=a.getRandomPath(),r=this.pathPoints[t],o=this.pathPoints[(t+1)%this.pathPoints.length];this.spNode.setPosition(r.x,0,r.z),this.spNode.lookAt(h(o.x,0,o.z));var l=s.filter((function(t){return t.name.indexOf("Sphere")>-1})).map((function(t){var e=h();return t.getWorldPosition(e),e}));this.spliceData.spIndex=t,this.spliceData.spNum=l.length,this.spliceData.splicedPoint=r,(i=this.pathPoints).splice.apply(i,[t,1].concat(l)),this.spliceData.targetIndex=(t+this.spliceData.spNum)%this.pathPoints.length,this.spliceData.segmentHandler=a,t<this.curPointIndex&&(this.curPointIndex+=this.spliceData.spNum-1,this.curPointIndex%=this.pathPoints.length)},r.restoreSplicedPoint=function(){this.spNode.active=!1,this.numSegmentsCovered+=1;var t=this.spliceData;this.pathPoints.splice(t.spIndex,t.spNum,t.splicedPoint),this.spliceData.spIndex>=0&&this.curPointIndex>=this.spliceData.targetIndex&&t.spIndex<this.curPointIndex&&(this.curPointIndex-=t.spNum-1)},r.useGun=function(t){var e=H[t];this.muzzleVFX=this.flashVFXList[e.flashFx];var i=this.gunNodes[e.model];i.parent.children.forEach((function(t){t.active=!1,i==t&&(t.active=!0)})),this.gunCfg=e},r.onLoad=function(){this.playerCollider=this.node.getComponent(g)},r.start=function(){var t=this;this.cameraMotion=this.dynamicCamera,this.pathNode.children.forEach((function(e,i){var n=h();e.getWorldPosition(n),t.pathPoints.push(n)}));var e={node:this.node,component:this,duration:1,health:100,ammo:2};St.context=e;var i=Ct(St);this.stateMachine=Nt(i),this.stateMachine.start(),this.animHandle.on(c.EventType.FINISHED,this.onAnimFinished,this);var n=I("/GameHandler");this.audioHandler=n.getComponent(L),this.gameHandler=n.getComponent(U),this.curPointIndex=0,this.difficultyIndex=y(0,this.difficultyCurve.length),this.splicePath(this.curPointIndex+1),Dt.set(this.pathPoints[this.curPointIndex]),this.t=1,Ht=Dt.subtract(this.pathPoints[this.curPointIndex+1]).length(),this.node.setPosition(this.pathPoints[this.curPointIndex+1]),this.turnPlayer2Target(this.pathPoints[(this.curPointIndex+1)%this.pathPoints.length])},r.resetPlayer=function(){this.curPointIndex=this.spliceData.targetIndex,this.playerCollider.enabled=!1,this.curSegmentHandler.clearEnemies(this.gameHandler),this.restoreSplicedPoint(),this.curPointIndex=0,this.difficultyIndex=0,this.splicePath(this.curPointIndex+1),Dt.set(this.pathPoints[this.curPointIndex]),this.t=1,Ht=Dt.subtract(this.pathPoints[this.curPointIndex+1]).length(),this.node.setPosition(this.pathPoints[this.curPointIndex+1]),this.turnPlayer2Target(this.pathPoints[(this.curPointIndex+1)%this.pathPoints.length]);var t={s:this.spliceData};this.gameHandler.stateMachine.send({type:R.SEGMENT_START,value:t}),this.playerCollider.enabled=!0,this.numSegmentsCovered=0,this.activeReloadWidget.node.active=!1,this.numARTriggered=0,this.activeReloadWidget.resetWidget()},r.onAnimFinished=function(t,e){var i={n:e.name,s:e};this.stateMachine.send({type:R.ANIM_FINISHED,value:i})},r.onKeyDown=function(t){switch(this.animHandle.node.setRotationFromEuler(new v(0,180,0)),t.keyCode){case x.KEY_R:case x.SPACE:if(this.gameHandler.stateMachine.state.value!=D.RUNNING)return;var e={i:S.KEY_DOWN,e:{e:t,d:A}};this.stateMachine.send({type:R.USER_INPUT,value:e});break;case x.KEY_I:case x.KEY_S:case x.KEY_F:break;case x.ESCAPE:var i={i:S.BUTTON_CLICK,e:{e:t,d:K}};this.gameHandler.stateMachine.send({type:R.USER_INPUT,value:i})}},r.onMouseDown=function(t){this.stateMachine.send({type:R.USER_INPUT,value:{e:t}})},r.onMouseMove=function(t){t.getUILocation(this.mouseLocation),this.crossHair.setWorldPosition(this.mouseLocation.x,this.mouseLocation.y,0),t.getLocation(this.mouseLocation),this.playerCamera.screenPointToRay(this.mouseLocation.x,this.mouseLocation.y,this.shootRay);if(this.lastCollider=null,b.instance.raycastClosest(this.shootRay,4294967295,1e7,!0)){var e=b.instance.raycastClosestResult.collider;this.lastCollider=e}},r.turnPlayer2Target=function(t){this.node.getRotation(Et),this.node.getWorldPosition(Dt),v.subtract(Dt,Dt,t),l.fromViewUp(Tt,Dt,v.UNIT_Y);var e=this.node;C(e).to(.125,{rotation:Tt},{easing:"expoOut",onUpdate:function(t,i){l.slerp(Rt,Et,Tt,i),e.rotation=Rt}}).start()},r.onGameUpdate=function(t){var e=this.node,i=t*this.speed,n=this.curPointIndex,a=(this.curPointIndex+1)%this.pathPoints.length;if(this.t+=i/Ht,this.t>=1){if(this.t=0,this.curPointIndex+=1,this.curPointIndex==this.pathPoints.length&&(this.curPointIndex=0),this.spliceData.targetIndex==this.curPointIndex){var s=new T;Object.assign(s,this.spliceData);var r={s:s};this.gameHandler.stateMachine.send({type:R.SEGMENT_END,value:r}),this.playerCollider.enabled=!1,this.restoreSplicedPoint(),this.splicePath(this.curPointIndex);var o={s:this.spliceData};this.gameHandler.stateMachine.send({type:R.SEGMENT_START,value:o}),this.playerCollider.enabled=!0}this.turnPlayer2Target(this.pathPoints[(this.curPointIndex+1)%this.pathPoints.length]),n=this.curPointIndex,a=(this.curPointIndex+1)%this.pathPoints.length,Dt.set(this.pathPoints[a]),Ht=Dt.subtract(this.pathPoints[n]).length()}v.lerp(Dt,this.pathPoints[n],this.pathPoints[a],this.t),e.setWorldPosition(Dt),this.stateMachine.send({type:R.UPDATE,value:t})},r.onEnter=function(t,e){this.stateMachine.send({type:R.TRIGGER_ENTERED,value:{t:t,e:e}})},r.onExit=function(t,e){this.stateMachine.send({type:R.TRIGGER_EXITED,value:{t:t,e:e}})},r.onDestroy=function(){this.stateMachine.stop(),this.animHandle.off(c.EventType.LASTFRAME,this.onAnimFinished,this)},s(e,[{key:"cameraMotion",get:function(){return this.dynamicCamera},set:function(t){this.dynamicCamera=t,this.dynamicCamera?(this.playerCamera.enabled=!1,this.runCamera.enabled=!0):(this.playerCamera.enabled=!0,this.runCamera.enabled=!1)}}]),e}(F)).prototype,"animHandle",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(ot.prototype,"playerCamera",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(ot.prototype,"runCamera",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(ot.prototype,"screenCamera",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(ot.prototype,"dynamicCamera",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pt=e(ot.prototype,"crossHair",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(ot.prototype,"pathNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(ot.prototype,"spNodes",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pt=e(ot.prototype,"gunNodes",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yt=e(ot.prototype,"flashVFXList",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gt=e(ot.prototype,"pointLight",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=e(ot.prototype,"activeReloadWidget",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(ot.prototype,"hitPoint",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=ot))||rt));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerIdle.ts",["cc","./GameCommon.ts"],(function(e){"use strict";var t,n,a,r,u;return{setters:[function(e){t=e.cclegacy},function(e){n=e.PlayerState,a=e.GameEventType,r=e.QGGameInput,u=e.PlayerAnimations}],execute:function(){var c;t._RF.push({},"7430eE2fu1F6KSmhUXFg+3m","PlayerIdle",void 0);e("PlayerIdle",{entry:function(e,t){e.prev_state=e.cur_state,e.cur_state=n.IDLE;var a=e.component;a.speed=0,a.inTrigger=!1},exit:function(e,t){e.prev_state=n.IDLE},on:(c={},c[a.UPDATE]={},c[a.USER_INPUT]={target:n.RUNNING,cond:function(e,t){var n=e.component;if(n.lastCollider=null,t.value.i==r.MOUSE_BUTTON_DOWN){var u={v:n.gunCfg.clipSize,p:e.ammo};e.ammo=n.gunCfg.clipSize,n.gameHandler.stateMachine.send({type:a.AMMO_COUNT_CHANGED,value:u});var c={s:n.spliceData};return n.gameHandler.stateMachine.send({type:a.SEGMENT_START,value:c}),!0}return!1}},c[a.ANIM_FINISHED]={target:n.RUNNING,cond:function(e,t){return t.value.n,u.INSPECT,!1}},c)});t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerReload.ts",["cc","./GameCommon.ts","./TriggerHandler.ts","./ActiveReload.ts"],(function(e){"use strict";var a,n,t,i,o,r,c,d,l,u,R,s,g,A,T;return{setters:[function(e){a=e.cclegacy,n=e.Vec3,t=e.EventMouse},function(e){i=e.PlayerAnimations,o=e.SFX,r=e.GameConfig,c=e.PlayerState,d=e.GameEventType,l=e.QGGameInput,u=e.RELOAD_BUTTON_DATA,R=e.GameColors},function(e){s=e.TriggerType},function(e){g=e.AR_FAILED,A=e.AR_PERFECT,T=e.AR_NORMAL}],execute:function(){var m;function S(e,a){var n=e.component,t={v:n.gunCfg.clipSize,p:e.ammo};e.ammo=n.gunCfg.clipSize,e.component.gameHandler.stateMachine.send({type:d.AMMO_COUNT_CHANGED,value:t})}a._RF.push({},"317eenhK6VGZ47q94+o1/WS","PlayerReload",void 0);var E=c.RUNNING,N=null,v=!1;e("PlayerReload",{entry:function(e,a){var t=e.component;t.animHandle.node.setRotationFromEuler(new n(0,180,0)),t.animHandle.play(i.RELOAD),t.audioHandler.playSFX(o.RELOAD),(N=t.animHandle.getState(i.RELOAD)).speed=N.duration/2.5,t.crossHair.active=!1,t.activeReloadWidget.node.active=!0,t.activeReloadWidget.active=!0,t.activeReloadWidget.duration=2.5,v=!1,t.inTrigger?E=c.STAND:e.inTutorial?E=c.TUTORIAL:(t.speed=r.PLAYER_WALKING_SPEED[t.gameHandler.difficulty],E=c.RUNNING)},exit:function(e,a){var n=e.component;n.crossHair.active=!0,n.activeReloadWidget.node.active=!1,e.prev_state=c.RELOAD},on:(m={},m[d.UPDATE]={},m[d.USER_INPUT]={actions:function(e,a){var n=e.component,i=a.value;if(i.i==l.BUTTON_CLICK&&i.e.d==u||i.i==l.KEY_DOWN&&i.e.d==u||i.e.getButton()==t.BUTTON_RIGHT&&e.ammo<n.gunCfg.clipSize){if(v)return;switch(v=!0,n.numARTriggered+=1,n.activeReloadWidget.onActiveReloadTriggered()){case T:N.speed=N.duration/1.75,n.audioHandler.playSFX(o.ARSUCCESS),n.gameHandler.ShowShotFeedback("[+1s]",R.YELLOW);break;case A:N.speed=N.duration/1.5,n.audioHandler.playSFX(o.ARSUCCESS),n.gameHandler.ShowShotFeedback("[+0.75s]",R.YELLOW);break;default:case g:n.gameHandler.onPlayerHit(null),n.audioHandler.playSFX(o.ARFAILED)}}}},m[d.ANIM_FINISHED]=[{target:c.TUTORIAL,actions:S,cond:function(e,a){return E==c.TUTORIAL}},{target:c.RUNNING,actions:S,cond:function(e,a){return E==c.RUNNING}},{target:c.STAND,actions:S,cond:function(e,a){return E==c.STAND}}],m[d.TRIGGER_ENTERED]=[{target:c.STAND,actions:S,cond:function(e,a){return a.value.t.triggerType==s.SHOOTING_GALLERY}}],m)});a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerRunning.ts",["cc","./GameCommon.ts","./OnUserInput.ts","./TriggerHandler.ts","./OnTriggerEntered.ts","./Inventory.ts"],(function(n){"use strict";var e,t,a,r,i,o,c,s,u,l,d;return{setters:[function(n){e=n.cclegacy,t=n.Vec3},function(n){a=n.PlayerAnimations,r=n.GameConfig,i=n.PlayerState,o=n.GameEventType},function(n){c=n.OnUserInput},function(n){s=n.TriggerType},function(n){u=n.OnShootingGallaryEntered,l=n.OnSpawnTargetPracticeEntered},function(n){d=n.Inventory}],execute:function(){var g,p,R;e._RF.push({},"ccacemfbGlAGYR6j6J3Z0RK","PlayerRunning",void 0);n("PlayerRunning",{entry:function(n,e){var i=n.component;i.animHandle.node.setRotationFromEuler(new t(0,180,0)),i.animHandle.play(a.RUN),p=r.PLAYER_ACCELERATION[i.gameHandler.difficulty];var o=d.instance.data;R=r.UPGRADES.Speed.upgrade[o.selection.upgrades.speed]},exit:function(n,e){n.prev_state=i.RUNNING},on:(g={},g[o.UPDATE]={actions:function(n,e){var t=n.component;t.speed<R?t.speed+=p*e.value:t.speed=R}},g[o.USER_INPUT]=c,g[o.TRIGGER_ENTERED]=[u,{target:i.TUTORIAL,cond:function(n,e){return!(e.value.t.triggerType!=s.SPAWN_TARGET_PRACTICE||!d.instance.data.showTutorial)&&(d.instance.data.showTutorial=!1,!0)},actions:function(n,e){l.actions(n,e)}},l],g)});e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerStand.ts",["cc","./GameCommon.ts","./OnUserInput.ts","./SegmentHandler.ts","./EnemyHandler.ts"],(function(e){"use strict";var n,t,a,r,o,s,i,l;return{setters:[function(e){n=e.cclegacy,t=e.log},function(e){a=e.PlayerState,r=e.GameEventType,o=e.EnemyState},function(e){s=e.OnUserInput},function(e){i=e.SegmentHandler},function(e){l=e.EnemyHandler}],execute:function(){var c;n._RF.push({},"9216ft4rpJIBZ/Vms3Rr/Yy","PlayerStand",void 0);var m=e("PlayerStand",{target_counter:0,target_data:{e:"",c:0},segment_handle:null,spawn_points:null,entry:function(e,n){var a=e.component;if(a.speed=0,a.animHandle.play("idle"),a.inTrigger);else{m.segment_handle=a.spNode.getComponent(i);var r=n.value.t;m.spawn_points=null;try{t("Entered:",r.node.name);var o=r.node.name.split("_");m.target_data.e=o[1],m.target_data.c=parseInt(o[3]),a.inTrigger=!0,m.target_counter=0,a.curSegmentHandler.clearEnemies(a.gameHandler),r.points.length>0&&(m.spawn_points=r.points)}catch(e){t(e)}}},exit:function(e,n){e.component;e.prev_state=a.STAND},on:(c={},c[r.UPDATE]={actions:function(e,n){var t=e.component;if(0==m.segment_handle.enemyContainer.children.filter((function(e){var n=e.getComponent(l);return n.stateMachine.state.value!=o.DEAD&&null!=n.skAnimHandle})).length&&m.target_counter<m.target_data.c){var a=m.segment_handle,r=Math.min(m.target_data.c-m.target_counter,3);a.spawnEnemies(t.gameHandler.humanoid_target_pool,r,m.spawn_points)}}},c[r.USER_INPUT]=s,c)});n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerTutorial.ts",["cc","./GameCommon.ts","./OnUserInput.ts"],(function(e){"use strict";var n,t,a,i,o,r,l,u,c,s,d;return{setters:[function(e){n=e.cclegacy,t=e.log,a=e.resources,i=e.Prefab,o=e.instantiate,r=e.find,l=e.AnimationComponent,u=e.sys},function(e){c=e.PlayerState,s=e.GameEventType},function(e){d=e.OnUserInput}],execute:function(){var m;n._RF.push({},"f2d20us1oVHkJi3w26OlJWV","PlayerTutorial",void 0);var _=e("PlayerTutorial",{target_counter:0,target_data:{e:"",c:0},segment_handle:null,spawn_points:null,tutorial_node:null,animHandle:null,entry:function(e,n){var s=e.component;if(s.speed=0,s.animHandle.play("idle"),e.inTutorial=!0,_.tutorial_node)switch(t("PrevState:",e.prev_state),e.prev_state){case c.RUNNING:break;case c.ATTACK:_.animHandle.getState("demo_shooting").isPlaying&&e.ammo<s.gunCfg.clipSize&&_.animHandle.play("demo_reload");break;case c.RELOAD:e.inTutorial=!1,_.tutorial_node.removeFromParent(),s.gameHandler.user_inventory.showTutorial=!1,s.onAnimFinished(null,{name:"demo_reload",v:"done"})}else a.load("tutorial/Tutorial",i,(function(e,n){var t=o(n);r("Canvas/Gameplay").addChild(t),_.tutorial_node=t,_.animHandle=t.getComponent(l),_.animHandle.play("demo_shooting"),u.hasFeature(u.Feature.INPUT_TOUCH)?(t.getChildByName("TouchScreen").active=!0,t.getChildByName("NonTouchScreen").active=!1):(t.getChildByName("TouchScreen").active=!1,t.getChildByName("NonTouchScreen").active=!0)}))},on:(m={},m[s.USER_INPUT]=d,m[s.ANIM_FINISHED]={target:c.RUNNING,cond:function(e,n){return t("AnimationFinished:",e.inTutorial),!e.inTutorial}},m),exit:function(e,n){}});n._RF.pop()}}}));

System.register("chunks:///_virtual/PokiPlatform.ts",["cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.cclegacy,t=e.game}],execute:function(){n._RF.push({},"24347IcaJ1AoYk+XXqEyYPI","PokiPlatform",void 0);var o=window.PokiSDK,i=e("CCPokiSDK",function(){function e(){}return e.rewardBreak=function(){try{o.rewardedBreak().then((function(n){t.emit(e.EVENT_REWARD_BREAK_DONE,n)}))}catch(e){console.log(e)}},e.commercialBreak=function(){o.commercialBreak((function(){t.emit(e.EVENT_COMMERCIAL_BREAK_START)})).then((function(){t.emit(e.EVENT_COMMERCIAL_BREAK_DONE)}))},e.gameplayStop=function(){o.gameplayStop()},e.gameplayStart=function(){o.gameplayStart()},e.shareableURL=function(n){o.shareableURL(n).then((function(n){console.log(n),t.emit(e.EVENT_SHRABLE_URL_READY,n)}))},e.isAdBlocked=function(){return o.isAdBlocked()},e.getURLParam=function(e){return o.getURLParam(e)},e.gameLoadingFinished=function(){o.gameLoadingFinished()},e}());i.EVENT_REWARD_BREAK_DONE="prbr",i.EVENT_COMMERCIAL_BREAK_START="pcvs",i.EVENT_COMMERCIAL_BREAK_DONE="pcvr",i.EVENT_SHRABLE_URL_READY="psur",n._RF.pop()}}}));

System.register("chunks:///_virtual/RenderOptimizer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TriggerObserver.ts"],(function(e){"use strict";var r,i,t,n,o,s,c,d,a,l,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,c=e.Node,d=e.BoxCollider,a=e.geometry,l=e.MeshRenderer},function(e){u=e.TriggerObserver}],execute:function(){var p,h,f,b,m,g,y;o._RF.push({},"ee503ocHrpOF7Wo2RSDJ9Mc","RenderOptimizer",void 0);var z=s.ccclass,v=s.property;s.executeInEditMode,e("RenderOptimizer",(p=z("RenderOptimizer"),h=v(c),f=v(c),p((g=r((m=function(e){function r(){for(var r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o))||this,t(r,"VisibleNodes",g,n(r)),t(r,"HiddenNodes",y,n(r)),r.renderers=[],r.models=[],r}i(r,e);var o=r.prototype;return o.start=function(){var e=this,r=this.getComponent(d),i=this.node.position,t=new a.AABB(i.x,i.y,i.z,r.size.x,r.size.y,r.size.z),n=this.node.parent.parent.getChildByName("Models");this.renderers=n.getComponentsInChildren(l),this.models=this.renderers.map((function(e){return e.model})),this.models.forEach((function(r,i){a.intersect.aabbWithAABB(r.worldBounds,t)?e.renderers[i].enabled=!0:e.renderers[i].enabled=!1}))},o.onEnter=function(e,r){this.VisibleNodes.forEach((function(e){e.active=!0})),this.HiddenNodes.forEach((function(e){e.active=!1}))},o.onExit=function(e,r){},r}(u)).prototype,"VisibleNodes",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=r(m.prototype,"HiddenNodes",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=m))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/RoundScoreItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,i,n,l,a,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,a=e.Label,u=e.Color,c=e.Node,p=e.Component}],execute:function(){var s,b,f,d,h,y,g,v,m,L,C,S,z;n._RF.push({},"6326dCvfkhFs7ASD+6YGryC","RoundScoreItem",void 0);var I=l.ccclass,R=l.property;e("RoundScoreItem",(s=I("RoundScoreItem"),b=R(a),f=R(a),d=R(u),h=R(u),y=R(c),s((m=t((v=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,o(t,"valueLabel",m,i(t)),o(t,"topValueLabel",L,i(t)),o(t,"defaultColor",C,i(t)),o(t,"topColor",S,i(t)),o(t,"trophyNode",z,i(t)),t}r(t,e);var n=t.prototype;return n.start=function(){},n.setRoundValue=function(e,t){this.valueLabel.string=e.toString(),this.topValueLabel.string=t.toString(),e>=t?(this.trophyNode.setSiblingIndex(2),this.valueLabel.color=this.topColor):(this.trophyNode.setSiblingIndex(3),this.valueLabel.color=this.defaultColor)},t}(p)).prototype,"valueLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(v.prototype,"topValueLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(v.prototype,"defaultColor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(v.prototype,"topColor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(v.prototype,"trophyNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/SegmentHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnemyHandler.ts","./GameHandler.ts"],(function(e){"use strict";var n,t,i,a,r,o,s,l,u,c,h,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,s=e.v3,l=e.Quat,u=e.randomRangeInt,c=e.Component},function(e){h=e.EnemyHandler},function(e){p=e.GameHandler}],execute:function(){var d,m,g,f,y,v,C;r._RF.push({},"28588Mu2LZGnoI68jjjerEe","SegmentHandler",void 0);var H=o.ccclass,w=o.property,P=s(),E=new l;e("SegmentHandler",(d=H("SegmentHandler"),m=w(p),g=w(Number),d((v=n((y=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(n=e.call.apply(e,[this].concat(r))||this).paths=[],n.enemyContainer=null,n.spawnPonts=[],n.triggers=[],i(n,"gameHandler",v,a(n)),i(n,"enemyCount",C,a(n)),n.enemiesSpawned=0,n}t(n,e);var r=n.prototype;return r.onLoad=function(){this.paths=this.node.getChildByName("Paths").children,this.enemyContainer=this.node.getChildByName("Enemies"),this.spawnPonts=this.node.getChildByName("SpawnPoints").children,this.triggers=this.node.getChildByName("Triggers").children},r.start=function(){},r.update=function(e){},r.getRandomPath=function(){return this.paths[u(0,this.paths.length)].children},r.pickUnique=function(e,n){for(var t=[],i=[];t.length<n;){var a=u(0,e.length);i[a]||(i[a]=!0,t.push(e[a]))}return t},r.spawnEnemies=function(e,n,t){var i=this,a=n||this.enemyCount[this.gameHandler.difficulty],r=t||this.spawnPonts,o=this.pickUnique(r,a);o.forEach((function(n){var t=e.get();if(t){n.getPosition(P),t.setPosition(P),n.getRotation(E),t.setRotation(E),t.name=n.name,i.enemyContainer.addChild(t);var a=t.getComponent(h);a.stateMachine.start(),a.onSpawnEvent(n)}})),this.enemiesSpawned=o.length},r.clearEnemies=function(e){[].concat(this.enemyContainer.children).forEach((function(n,t){var i=n.getComponent(h);i.stateMachine.stop(),i.animHandle?e.dummy_target_pool.put(n):e.humanoid_target_pool.put(n)}))},n}(c)).prototype,"gameHandler",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(y.prototype,"enemyCount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[1,1,1]}}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/TargetPractice.ts",["cc","./GameCommon.ts"],(function(n){"use strict";var t,e,a,o,r,c,i,u;return{setters:[function(n){t=n.cclegacy,e=n.randomRangeInt,a=n.randomRange,o=n.v3},function(n){r=n.GameEventType,c=n.EnemyState,i=n.BBOX_HEAD,u=n.SFX}],execute:function(){var l,g,m;t._RF.push({},"6026crka+lOba9+vgy+kZGM","TargetPractice",void 0);n("TargetPracticeIdle",{entry:function(n,t){},exit:function(n,t){},on:(l={},l[r.ENEMY_SPAWN]={target:c.RUNNING,actions:function(n,t){var e=n.component;e.resetEnemy(n);var a=o(e.gameHandler.playerComponent.node.position);a.y=e.node.position.y,e.node.lookAt(a)}},l)}),n("TargetPracticeRunning",{entry:function(n,t){n.component.animHandle.play("target_spawn")},exit:function(n,t){},on:(g={},g[r.ENEMY_HIT]=[{target:c.DEAD,cond:function(n,t){var o=n.component,r=t.value;if(o.health>0){r.b==i?o.health=0:o.health-=r.s.gunCfg.damage;var c=[u.IMPACT1,u.IMPACT2,u.IMPACT3,u.IMPACT4][e(0,4)];o.audioHandler.playSFX(c,a(2,2.5))}return o.health<=0}}],g)}),n("TargetPracticeDead",{entry:function(n,t){var e=n.component;e.animHandle.play("target_destroy"),e.colliders.forEach((function(n){n.enabled=!1}))},exit:function(n,t){},on:(m={},m[r.ANIM_FINISHED]={target:c.IDLE,actions:function(n,t){n.component.gameHandler.dummy_target_pool.put(n.node)}},m)});t._RF.pop()}}}));

System.register("chunks:///_virtual/TestRenderer.ts",["cc","./PassUtils.ts"],(function(e){"use strict";var s,r,a,t,i,n,c,u,o,l;return{setters:[function(e){s=e.cclegacy,r=e.renderer},function(e){a=e.decideProfilerCamera,t=e.buildForwardPass,i=e.isUICamera,n=e.buildFxaaPass,c=e.buildBloomPasses,u=e.buildPostprocessPass,o=e.AntiAliasing,l=e.buildUIPass}],execute:function(){s._RF.push({},"4f80dKCVddDm6L2ZdwRTUgv","TestRenderer",void 0);e("TestCustomPipeline",function(){function e(){}return e.prototype.setup=function(e,s){a(e);for(var d=0;d<e.length;d++){var f=e[d];if(null!==f.scene){var m=f.cameraUsage===r.scene.CameraUsage.GAME||f.cameraUsage===r.scene.CameraUsage.GAME_VIEW;if(m)if(i(f))l(f,s);else{var g=t(f,s,m),P=n(f,s,g.rtName),p=c(f,s,P.rtName);u(f,s,p.rtName,o.NONE)}else t(f,s,m)}}},e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/TriggerHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TriggerObserver.ts"],(function(e){"use strict";var r,t,i,n,o,s,a,c,u,g,p,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator,c=e.ccenum,u=e.Node,g=e.Collider,p=e.Component},function(e){l=e.TriggerObserver}],execute:function(){var T,h,f,d,b,E,I,v,y,_;e("TriggerType",void 0),s._RF.push({},"da29a7X2xRLhYbfjdmh85IH","TriggerHandler",void 0);var O,L=a.ccclass,A=a.property,R=a.executeInEditMode;!function(e){e[e.OBJECT_VISIBILITY=0]="OBJECT_VISIBILITY",e[e.SHOOTING_GALLERY=1]="SHOOTING_GALLERY",e[e.PLAYER_PROXIMITY=2]="PLAYER_PROXIMITY",e[e.PLAYER_LOOKAT=3]="PLAYER_LOOKAT",e[e.SPAWN_TARGET_PRACTICE=4]="SPAWN_TARGET_PRACTICE"}(O||(O=e("TriggerType",{}))),c(O);e("TriggerHandler",(T=L("TriggerHandler"),h=A(Boolean),f=A({type:O}),d=A(l),b=A(u),T(E=R((r((I=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return(r=e.call.apply(e,[this].concat(o))||this)._debug=!1,i(r,"triggerType",v,n(r)),i(r,"observers",y,n(r)),i(r,"points",_,n(r)),r}t(r,e);var s=r.prototype;return s.start=function(){var e=this.node.getComponent(g);e.on("onTriggerEnter",this.onEnter,this),e.on("onTriggerExit",this.onExit,this)},s.onEnter=function(e){var r=this;this.observers.forEach((function(t){t.onEnter(r,e)}))},s.onExit=function(e){var r=this;this.observers.forEach((function(t){t.onExit(r,e)}))},o(r,[{key:"debug",get:function(){return this._debug},set:function(e){this._debug=!!e;var r=this.node.parent.parent.getChildByName("SpawnPoints");r.active=this._debug,r.children.forEach((function(e){return e.active=!1}));for(var t=0;t<this.points.length;t++)this.points[t].active=this._debug}}]),r}(p)).prototype,"debug",[h],Object.getOwnPropertyDescriptor(I.prototype,"debug"),I.prototype),v=r(I.prototype,"triggerType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.OBJECT_VISIBILITY}}),y=r(I.prototype,"observers",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=r(I.prototype,"points",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=I))||E)||E));s._RF.pop()}}}));

System.register("chunks:///_virtual/TriggerObserver.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,t,n,o;return{setters:[function(r){e=r.inheritsLoose},function(r){t=r.cclegacy,n=r._decorator,o=r.Component}],execute:function(){var i;t._RF.push({},"64ec7LB7uVDdor0bjviSNEP","TriggerObserver",void 0);var c=n.ccclass;n.property,r("TriggerObserver",c("TriggerObserver")(i=function(r){function t(){return r.apply(this,arguments)||this}e(t,r);var n=t.prototype;return n.onEnter=function(r,e){},n.onExit=function(r,e){},t}(o))||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/UI_Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EasyController.ts"],(function(e){"use strict";var t,o,i,h,n,s,c,r,a,_;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,i=e._decorator,h=e.v2,n=e.UITransform,s=e.director,c=e.Input,r=e.KeyCode,a=e.Component},function(e){_=e.EasyControllerEvent}],execute:function(){var u;o._RF.push({},"d5ca1RyU0hCzYn1hZJ9jXJN","UI_Joystick",void 0);var T=i.ccclass,l=(i.property,h());e("UI_Joystick",T("UI_Joystick")(u=function(e){function o(){for(var t,o=arguments.length,i=new Array(o),h=0;h<o;h++)i[h]=arguments[h];return(t=e.call.apply(e,[this].concat(i))||this)._ctrlRoot=null,t._ctrlPointer=null,t._checkerCamera=null,t._cameraSensitivity=.1,t._distanceOfTwoTouchPoint=0,t._movementTouch=null,t._cameraTouchA=null,t._cameraTouchB=null,t._scene=null,t._keys=[],t._degree=0,t.key2dirMap=null,t}t(o,e);var i=o.prototype;return i.start=function(){this._ctrlRoot=this.node.getChildByName("ctrl").getComponent(n),this._ctrlRoot.node.active=!1,this._ctrlPointer=this._ctrlRoot.node.getChildByName("pointer"),this._scene=s.getScene()},i.onEnable=function(){var e=this.node.getChildByName("checker_camera").getComponent(n);e.node.on(c.EventType.TOUCH_START,this.onTouchStart_CameraCtrl,this),e.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove_CameraCtrl,this),e.node.on(c.EventType.TOUCH_END,this.onTouchUp_CameraCtrl,this),e.node.on(c.EventType.TOUCH_CANCEL,this.onTouchUp_CameraCtrl,this);var t=this.node.getChildByName("checker_movement").getComponent(n);t.node.on(c.EventType.TOUCH_START,this.onTouchStart_Movement,this),t.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove_Movement,this),t.node.on(c.EventType.TOUCH_END,this.onTouchUp_Movement,this),t.node.on(c.EventType.TOUCH_CANCEL,this.onTouchUp_Movement,this),this._checkerCamera=e},i.onDisable=function(){var e=this.node.getChildByName("checker_camera").getComponent(n);e.node.off(c.EventType.TOUCH_START,this.onTouchStart_CameraCtrl,this),e.node.off(c.EventType.TOUCH_MOVE,this.onTouchMove_CameraCtrl,this),e.node.off(c.EventType.TOUCH_END,this.onTouchUp_CameraCtrl,this),e.node.off(c.EventType.TOUCH_CANCEL,this.onTouchUp_CameraCtrl,this);var t=this.node.getChildByName("checker_movement").getComponent(n);t.node.off(c.EventType.TOUCH_START,this.onTouchStart_Movement,this),t.node.off(c.EventType.TOUCH_MOVE,this.onTouchMove_Movement,this),t.node.off(c.EventType.TOUCH_END,this.onTouchUp_Movement,this),t.node.off(c.EventType.TOUCH_CANCEL,this.onTouchUp_Movement,this)},i.onDestroy=function(){},i.onTouchStart_Movement=function(e){for(var t=e.getTouches(),o=0;o<t.length;++o){var i=t[o],h=i.getUILocationX(),n=i.getUILocationY();if(!this._movementTouch){var s=this._checkerCamera.width/2,c=this._checkerCamera.height/2;this._ctrlRoot.node.active=!0,this._ctrlRoot.node.setPosition(h-s,n-c,0),this._ctrlPointer.setPosition(0,0,0),this._movementTouch=i}}},i.onTouchMove_Movement=function(e){for(var t=e.getTouches(),o=0;o<t.length;++o){var i=t[o];if(this._movementTouch&&i.getID()==this._movementTouch.getID()){var h=this._checkerCamera.width/2,n=this._checkerCamera.height/2,s=i.getUILocationX(),c=i.getUILocationY(),r=this._ctrlRoot.node.position,a=s-h-r.x,u=c-n-r.y,T=Math.sqrt(a*a+u*u);if(T<=0)return;var m=a/T,v=u/T,E=this._ctrlRoot.width/2;T>E&&(T=E,a=m*E,u=v*E),this._ctrlPointer.setPosition(a,u,0),l.set(m,v),this._scene.emit(_.MOVEMENT,l)}}},i.onTouchUp_Movement=function(e){for(var t=e.getTouches(),o=0;o<t.length;++o){var i=t[o];this._movementTouch&&i.getID()==this._movementTouch.getID()&&(this._scene.emit(_.MOVEMENT_STOP),this._movementTouch=null,this._ctrlRoot.node.active=!1)}},i.getDistOfTwoTouchPoints=function(){var e=this._cameraTouchA,t=this._cameraTouchB;if(!e||!t)return 0;var o=e.getLocationX()-t.getLocationX(),i=t.getLocationY()-t.getLocationY();return Math.sqrt(o*o+i*i)},i.onTouchStart_CameraCtrl=function(e){var t=e.getAllTouches();this._cameraTouchA=null,this._cameraTouchB=null;for(var o=t.length-1;o>=0;o--){var i=t[o];if(!this._movementTouch||i.getID()!=this._movementTouch.getID())if(null==this._cameraTouchA)this._cameraTouchA=t[o];else if(null==this._cameraTouchB){this._cameraTouchB=t[o];break}}this._distanceOfTwoTouchPoint=this.getDistOfTwoTouchPoints()},i.onTouchMove_CameraCtrl=function(e){for(var t=e.getTouches(),o=0;o<t.length;++o){var i=t[o],h=i.getID();if(this._cameraTouchA&&this._cameraTouchB){console.log(h,this._cameraTouchA.getID(),this._cameraTouchB.getID());var n=!1;if(h==this._cameraTouchA.getID()&&(this._cameraTouchA=i,n=!0),h==this._cameraTouchB.getID()&&(this._cameraTouchB=i,n=!0),n){var s=this.getDistOfTwoTouchPoints(),c=this._distanceOfTwoTouchPoint-s;this._scene.emit(_.CAMERA_ZOOM,c),this._distanceOfTwoTouchPoint=s}}else if(this._cameraTouchA&&h==this._cameraTouchA.getID()){var r=i.getDelta(),a=r.y*this._cameraSensitivity,u=-r.x*this._cameraSensitivity;this._scene.emit(_.CAMERA_ROTATE,a,u)}}},i.onTouchUp_CameraCtrl=function(e){for(var t=e.getAllTouches(),o=!1,i=!1,h=0;h<t.length;++h){var n=t[h].getID();this._cameraTouchA&&n==this._cameraTouchA.getID()?o=!0:this._cameraTouchB&&n==this._cameraTouchB.getID()&&(i=!0)}o||(this._cameraTouchA=null),i||(this._cameraTouchB=null)},i.onKeyDown=function(e){var t=e.keyCode;t!=r.KEY_A&&t!=r.KEY_S&&t!=r.KEY_D&&t!=r.KEY_W||-1==this._keys.indexOf(t)&&(this._keys.push(t),this.updateDirection()),t==r.SPACE&&this._scene.emit(_.JUMP)},i.onKeyUp=function(e){var t=e.keyCode;if(t==r.KEY_A||t==r.KEY_S||t==r.KEY_D||t==r.KEY_W){var o=this._keys.indexOf(t);-1!=o&&(this._keys.splice(o,1),this.updateDirection())}},i.onMouseWheel=function(e){var t=.1*e.getScrollY();console.log(t),this._scene.emit(_.CAMERA_ZOOM,t)},i.updateDirection=function(){null==this.key2dirMap&&(this.key2dirMap={},this.key2dirMap[0]=-1,this.key2dirMap[r.KEY_A]=180,this.key2dirMap[r.KEY_D]=0,this.key2dirMap[r.KEY_W]=90,this.key2dirMap[r.KEY_S]=270,this.key2dirMap[1e3*r.KEY_A+r.KEY_W]=this.key2dirMap[1e3*r.KEY_W+r.KEY_A]=135,this.key2dirMap[1e3*r.KEY_D+r.KEY_W]=this.key2dirMap[1e3*r.KEY_W+r.KEY_D]=45,this.key2dirMap[1e3*r.KEY_A+r.KEY_S]=this.key2dirMap[1e3*r.KEY_S+r.KEY_A]=225,this.key2dirMap[1e3*r.KEY_D+r.KEY_S]=this.key2dirMap[1e3*r.KEY_S+r.KEY_D]=315,this.key2dirMap[1e3*r.KEY_A+r.KEY_D]=this.key2dirMap[r.KEY_D],this.key2dirMap[1e3*r.KEY_D+r.KEY_A]=this.key2dirMap[r.KEY_A],this.key2dirMap[1e3*r.KEY_W+r.KEY_S]=this.key2dirMap[r.KEY_S],this.key2dirMap[1e3*r.KEY_S+r.KEY_W]=this.key2dirMap[r.KEY_W]);var e=this._keys[this._keys.length-1]||0,t=this._keys[this._keys.length-2]||0;this._degree=this.key2dirMap[1e3*t+e],null==this._degree||this._degree<0?this._scene.emit(_.MOVEMENT_STOP):this._scene.emit(_.MOVEMENT,this._degree,1)},o}(a))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/UpgradableStat.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Inventory.ts"],(function(t){"use strict";var e,a,n,r,i,o,s,u,p,c,g,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,s=t.Button,u=t.Label,p=t.ToggleComponent,c=t.assert,g=t.Component},function(t){l=t.Inventory}],execute:function(){var d,f,h,S,b,U,y,C,m,v,B;i._RF.push({},"c493bPRm0BDRoSkQF8tYxNR","UpgradableStat",void 0);var N=o.ccclass,L=o.property;t("UpgradableStat",(d=N("UpgradableStat"),f=L(s),h=L(u),S=L(p),b=L(u),d((C=e((y=function(t){function e(){for(var e,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,n(e,"BuyUpgradeButton",C,r(e)),n(e,"StatName",m,r(e)),n(e,"UpgradeState",v,r(e)),n(e,"UpgradeCostLabel",B,r(e)),e.upgradeStatConfig=void 0,e.userStatName="",e}a(e,t);var i=e.prototype;return i.setStat=function(t,e){this.userStatName=t,this.upgradeStatConfig=e,this.updateUI()},i.updateUI=function(){var t=l.instance.data.selection.upgrades[this.userStatName];c(t<this.UpgradeState.length),this.UpgradeState.forEach((function(e,a){e.isChecked=a<=t})),t<this.upgradeStatConfig.upgrade.length-1?(this.UpgradeCostLabel.string="-"+this.upgradeStatConfig.cost[t],this.BuyUpgradeButton.interactable=!0):(this.UpgradeCostLabel.string="MAX",this.BuyUpgradeButton.interactable=!1)},i.canUpgrade=function(){var t=l.instance.data.selection.upgrades[this.userStatName],e=-1;return t<this.upgradeStatConfig.upgrade.length-1&&(e=this.upgradeStatConfig.cost[t]),e>0&&l.instance.data.coins>=e},i.getUpgradeCost=function(){var t=l.instance.data.selection.upgrades[this.userStatName],e=-1;return t<this.upgradeStatConfig.upgrade.length-1&&(e=this.upgradeStatConfig.cost[t]),e},i.upgradeStat=function(){var t=this.getUpgradeCost();t<0||(l.instance.data.coins-=t,l.instance.data.selection.upgrades[this.userStatName]+=1,l.instance.save())},i.start=function(){},i.update=function(t){},e}(g)).prototype,"BuyUpgradeButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(y.prototype,"StatName",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(y.prototype,"UpgradeState",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=e(y.prototype,"UpgradeCostLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=y))||U));i._RF.pop()}}}));

System.register("chunks:///_virtual/VSPicker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,i,e,n,s,h,r,c,u,a,f,p;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){h=t.cclegacy,r=t._decorator,c=t.Node,u=t.Vec3,a=t.Vec2,f=t.NodeEventType,p=t.Component}],execute:function(){var _,d,l,v,T,g,y;h._RF.push({},"2c57fbFwp1FzpDaQa44Hsph","VSPicker",void 0);var P=r.ccclass,S=r.property;t("VSPicker",(_=P("VSPicker"),d=S(c),l=S(c),_((g=o((T=function(t){function o(){for(var o,i=arguments.length,s=new Array(i),h=0;h<i;h++)s[h]=arguments[h];return(o=t.call.apply(t,[this].concat(s))||this)._touchPos=new u,o._offset=new u,o._sv=new a(0,1),e(o,"vline",g,n(o)),e(o,"hline",y,n(o)),o}i(o,t);var h=o.prototype;return h.start=function(){},h.update=function(t){},h.onEnable=function(){this.node.on(f.TOUCH_START,this._onTouchBegan,this),this.node.on(f.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(f.TOUCH_END,this._onTouchEnded,this)},h.onDisable=function(){this.node.off(f.TOUCH_START,this._onTouchBegan,this),this.node.off(f.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(f.TOUCH_END,this._onTouchEnded,this)},h._onTouchEnded=function(t){t&&(t.propagationStopped=!0)},h._onTouchMoved=function(t){var o=t.touch.getUILocation();u.set(this._touchPos,o.x,o.y,0),this.node._uiProps.uiTransformComp.hitTest(t.touch.getLocation())&&(this.updateSV(),t&&(t.propagationStopped=!0))},h.updateSV=function(){this.node._uiProps.uiTransformComp.convertToNodeSpaceAR(this._touchPos,this._offset);var t=this.node._uiProps.uiTransformComp;this.vline.setPosition(this._offset.x,0),this.hline.setPosition(0,this._offset.y);var o=(this._offset.x+t.width/2)/t.width,i=(this._offset.y+t.height/2)/t.height;this._sv.set(o,i),this.node.parent.emit("picked",this._sv)},h._onTouchBegan=function(t){var o=t.touch.getUILocation();u.set(this._touchPos,o.x,o.y,0),this.updateSV(),t&&(t.propagationStopped=!0)},s(o,[{key:"sv",get:function(){return this._sv},set:function(t){this._sv=t;var o=this.node._uiProps.uiTransformComp;this._offset.x=t.x*o.width-o.width/2,this._offset.y=t.y*o.height-o.height/2,this.vline.setPosition(this._offset.x,0),this.hline.setPosition(0,this._offset.y)}}]),o}(p)).prototype,"vline",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=o(T.prototype,"hline",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=T))||v));h._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});